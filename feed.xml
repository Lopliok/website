<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="https://jekyllrb.com/" version="3.7.4">Jekyll</generator><link href="https://fragaria.cz/feed.xml" rel="self" type="application/atom+xml"/><link href="https://fragaria.cz/" rel="alternate" type="text/html"/><updated>2019-04-08T10:37:55+00:00</updated><id>https://fragaria.cz/feed.xml</id><title type="html">Fragaria.cz</title><subtitle>Based in Prague, Czech Republic, we love building high-quality, reliable and scalable web applications without compromises. Having more than 10 years of experience in the field, our team is built upon senior-level experts. Think backends, frontends, SPAs and mobile apps; we know what it takes to do it absolutely right. </subtitle><entry xml:lang="en"><title type="html">Building a simple company website the Hard Way: Service workers</title><link href="https://fragaria.cz/blog/2019/04/08/building-a-simple-company-website-the-hard-way-service-workers/" rel="alternate" type="text/html" title="Building a simple company website the Hard Way: Service workers"/><published>2019-04-08T07:00:00+00:00</published><updated>2019-04-08T07:00:00+00:00</updated><id>https://fragaria.cz/blog/2019/04/08/building-a-simple-company-website-the-hard-way-service-workers</id><content type="html" xml:base="https://fragaria.cz/blog/2019/04/08/building-a-simple-company-website-the-hard-way-service-workers/">&lt;p&gt;Hi there once again! I’m gonna close our little &lt;em&gt;Building a simple company website the Hard Way&lt;/em&gt; series with a brief introduction to how service workers operate and why you should want them on your website, too. They’re cool and fancy, sometimes unnecessary, but likely still worth your time as I’m about to demonstrate.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile figure--wide&quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/PIXNIO-227587-5372x3586_khjell&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/PIXNIO-227587-5372x3586_khjell 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/PIXNIO-227587-5372x3586_khjell 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/PIXNIO-227587-5372x3586_khjell 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/PIXNIO-227587-5372x3586_khjell 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/PIXNIO-227587-5372x3586_khjell 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/PIXNIO-227587-5372x3586_khjell 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;section class=&quot;box&quot;&gt; &lt;p&gt;This article is a part of the &lt;i&gt;Building a simple company website the Hard Way&lt;/i&gt; series.&lt;/p&gt; &lt;ol&gt; &lt;li&gt;&lt;a href=&quot;/blog/2018/09/03/building-a-simple-company-website-the-hard-way-typography-intro/&quot;&gt;Typography introduction&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;/blog/2018/11/12/building-a-simple-company-website-the-hard-way-vertical-rhythm/&quot;&gt;Vertical rhythm&lt;/a&gt;&lt;/li&gt; &lt;li&gt;Service workers&lt;/li&gt; &lt;/ol&gt; &lt;/section&gt; &lt;p&gt;Service workers are little JavaScript worker scripts that run in the background. Besides their registration, they are completely managed by the browser. Their execution is not limited to the time you directly interact with the related website: &lt;em&gt;they’re kinda alive even if you’re not using the site&lt;/em&gt;.&lt;/p&gt; &lt;p&gt;As a result, they allow you to do some interesting stuff including:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;support offline use of your pages&lt;/li&gt; &lt;li&gt;trigger push notifications for new content on your site&lt;/li&gt; &lt;li&gt;synchronize cached data for offline use in the background&lt;/li&gt; &lt;li&gt;promote addition of home screen link to your page on mobile devices&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;For the sake of this article, we will focus on offline experience as it’s the most important feature for company portfolio websites.&lt;/p&gt; &lt;p&gt;Huge number of content viewers visit your page using their cellphones these days. As a result, your visitors frequently go offline temporarily as mobile networks are generally unrealiable.&lt;/p&gt; &lt;h2 id=&quot;saving-the-offline-situation&quot;&gt;Saving the offline situation&lt;/h2&gt; &lt;p&gt;Network connection hanging out in the middle of browsing often results in visitor simply quitting right away. This includes even situations when interruptions are to be expected: like during your descent down to the subway. Service workers can be used to mitigate such risk as they allow you to keep your website functional—albeit just partially—even while the visitor’s network connection is down.&lt;/p&gt; &lt;p&gt;How’s that possible? It’s because SW script can act like &lt;em&gt;a network proxy&lt;/em&gt;. It can intercept every request the browser makes to the server. This means you can modify the response (either forge one, or use a cached one) and avoid hitting the server completely. You can fill up the caches by pre-loading the content when SW script is being installed. This enables you to make your website blazing fast if you can anticipate next clicks of your users, too.&lt;/p&gt; &lt;p&gt;A typical scenario how offline support implementation looks like is following:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;Assemble a &lt;strong&gt;list of assets to load automatically&lt;/strong&gt; when visitor hits your site. This should include the content that is most likely to be required in near future. It can be anything you can think of: page documents, images, scripts, videos. Anything you want. Just make sure you’re &lt;em&gt;not too greedy&lt;/em&gt; about the data transfer. Remember: we do this for mobile devices where extensive data transfer can be costly.&lt;/li&gt; &lt;li&gt;Upon service worker installation, &lt;strong&gt;pre-load these assets&lt;/strong&gt; and store them in service worker cache.&lt;/li&gt; &lt;li&gt;Use service worker to &lt;strong&gt;proxy network requests&lt;/strong&gt;. Impose a timeout to load the content from the real server. If the server doesn’t make it on time, offer the cached version instead.&lt;/li&gt; &lt;li&gt;If both network and caches fail (e.g. when hitting something that wasn’t pre-loaded), serve some kind of „&lt;em&gt;You’re offline&lt;/em&gt;“ page so that the visitor knows what happend. This improves the general user experience.&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;using-service-workers&quot;&gt;Using service workers&lt;/h2&gt; &lt;p&gt;It is important to understand the basic lifecycle of a service worker to avoid potiential mistakes. Have a look at following diagram:&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/f_svg/fragaria.cz/posts/sw-lifecycle_t6dh0u&quot; srcset=&quot;&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;figcaption class=&quot;figure__caption&quot;&gt;Service worker lifecycle.&lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;After you’ve registered the SW, browser will run its installation stage. Next, the SW gets activated and it starts working as our network proxy. It will stay activated until it’s replaced by a new SW script or in case it fails somewhere along the way.&lt;/p&gt; &lt;p&gt;Particularly important is the condition when new SW get installed. By definition, this happens when service worker file &lt;em&gt;gets changed&lt;/em&gt;. Ultimately, it means new SW is installed once the size of the current SW script is different from the new one—&lt;em&gt;bytewise&lt;/em&gt;. Unfortunately, the exact process is little counterintuitive. Old SW is not replaced immediately after new SW is detected, but once the user leaves the page. This means closing it, not just refreshing. Weird? Yes but fortunately fixable. We can avoid default behavior by calling &lt;code class=&quot;highlighter-rouge&quot;&gt;skipWaiting&lt;/code&gt; SW method during the installation as shown below.&lt;/p&gt; &lt;p&gt;Still got your attention? Good. Let’s talk code for a moment. I’ll share few examples from this very website.&lt;/p&gt; &lt;h3 id=&quot;service-worker-registration&quot;&gt;Service worker registration&lt;/h3&gt; &lt;p&gt;You can initialize your service worker with a simple JS snippet that points the browser to the service worker script. It’s always a good idea to verify your browser supports service workers. All of the modern ones do but someone might still be using an old IE, right?&lt;/p&gt; &lt;p&gt;Next, just call &lt;code class=&quot;highlighter-rouge&quot;&gt;navigator.serviceWorker.register&lt;/code&gt; and provide it the path to the worker script itself. In following example, this script is available at &lt;code class=&quot;highlighter-rouge&quot;&gt;/sw.js&lt;/code&gt;.&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;serviceWorker&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;navigator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;navigator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;serviceWorker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/sw.js&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;registration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;[sw] Service Worker registration successful with scope: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;registration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;[sw] Service Worker registration failed: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Once this snippet is run, registration is finished. Browser takes over and starts the script in the background, proceeding to the installation stage.&lt;/p&gt; &lt;h3 id=&quot;pre-loading-content&quot;&gt;Pre-loading content&lt;/h3&gt; &lt;p&gt;Installation stage is there to prepare the SW for its real job. In our case, we want to use it as a network proxy. This is the right time to pre-load our content and fill up the caches. It’s rather straightforward:&lt;/p&gt; &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Cache assets&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/assets/favicons/android-chrome-192x192.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/assets/favicons/android-chrome-512x512.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/assets/favicons/apple-touch-icon.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/assets/favicons/favicon-16x16.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/assets/favicons/favicon-32x32.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Cache last 10 blog posts&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/blog/2019/04/05/building-a-simple-company-website-the-hard-way-service-workers/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/blog/2019/03/29/kouzlo-malych-projektu/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/blog/2019/02/05/runtime-configuration-in-web-applications/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Cache other pages&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/404.html&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/blog/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/work-with-us/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Cache name: adjust version number to invalidate service worker cache.&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;CACHE_NAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'sw-cache-v-1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;precache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CACHE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`[sw] Opened cache &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CACHE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addAll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'install'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`[sw] Installing ...`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Make sure not to get stuck waiting for the current to become terminated.&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;skipWaiting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Perform pre-loading of cached content.&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;waitUntil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;precache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Ultimately, we need a list of URLs to pre-load. Cache will contain some critical static assets, last 10 blog posts and few other important pages.&lt;/p&gt; &lt;p&gt;Next, we register the handler for the &lt;code class=&quot;highlighter-rouge&quot;&gt;install&lt;/code&gt; event. As a result, &lt;code class=&quot;highlighter-rouge&quot;&gt;precache&lt;/code&gt; is executed which adds all the assets to the SW cache. Caches are automatically available for every SW as the &lt;code class=&quot;highlighter-rouge&quot;&gt;caches&lt;/code&gt; global object and they are clever enough to know how to load URLs. Naturally, this will result in bunch of network requests made by the browser.&lt;/p&gt; &lt;p&gt;Before caching starts we also call &lt;code class=&quot;highlighter-rouge&quot;&gt;self.skipWaiting()&lt;/code&gt; method to ensure our new worker gets activated once install is finished. If we didn’t call it, old SW would be replaced &lt;em&gt;after&lt;/em&gt; user leaves the page which is not desirable.&lt;/p&gt; &lt;p&gt;Please note that &lt;code class=&quot;highlighter-rouge&quot;&gt;event&lt;/code&gt; is promise-aware so we can make it wait for &lt;code class=&quot;highlighter-rouge&quot;&gt;precache&lt;/code&gt; to finish by using &lt;code class=&quot;highlighter-rouge&quot;&gt;event.waitUntil&lt;/code&gt;.&lt;/p&gt; &lt;h3 id=&quot;network-proxying&quot;&gt;Network proxying&lt;/h3&gt; &lt;p&gt;When the SW is activated, it can start proxying network requests. This will allow us to make our page work offline. In order to do so, we need to add another handler, this time for &lt;code class=&quot;highlighter-rouge&quot;&gt;fetch&lt;/code&gt; browser event. &lt;code class=&quot;highlighter-rouge&quot;&gt;fetch&lt;/code&gt; is called whenever a request to our server is made by the browser. We can hijack it and make it return cached responses in case server is too slow to respond (which means network is down as our pages are purely static and quick to respond with). Basic script is following:&lt;/p&gt; &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;storeInCache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CACHE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cache&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;loadFromNetwork&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fulfill&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;clearTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;responseClone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;clone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fulfill&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;storeInCache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;responseClone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;loadFromCache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CACHE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cache&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;matching&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;matching&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'no-match'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'fetch'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;loadPipe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;loadFromNetwork&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;loadFromCache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;respondWith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;loadPipe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;We impose &lt;em&gt;1500 ms timeout&lt;/em&gt; to allow loading resources using the network. If this fails, we provide the cached version in case it’s available.&lt;/p&gt; &lt;p&gt;Let’s clean up the fetch handler a little. We do not want to alter the responses for &lt;code class=&quot;highlighter-rouge&quot;&gt;POST&lt;/code&gt; HTTP method. &lt;code class=&quot;highlighter-rouge&quot;&gt;POST&lt;/code&gt; usually means form submission. In that case, it would be unwise to pretend submit succeeded. Let’s intervene only for &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt;:&lt;/p&gt; &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'fetch'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;loadPipe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;loadFromNetwork&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;loadFromCache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'GET'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;loadPipe&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;respondWith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;offline-pages&quot;&gt;Offline pages&lt;/h3&gt; &lt;p&gt;In order to show user a nice offline page, we gotta improve our &lt;code class=&quot;highlighter-rouge&quot;&gt;loadPipe&lt;/code&gt; pipeline. Specifically, we need to handle the case when cached version of the page is &lt;em&gt;unavailable&lt;/em&gt;:&lt;/p&gt; &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'fetch'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'GET'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;loadFromNetwork&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;loadFromCache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;warn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'[sw] Could not load, redirecting to offline page '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CACHE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cache&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/offline/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;respondWith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/offline/&lt;/code&gt; should always be in the cache as we’ve added it to the cache during installation stage.&lt;/p&gt; &lt;h2 id=&quot;homescreen-link-to-your-page&quot;&gt;Homescreen link to your page&lt;/h2&gt; &lt;p&gt;Another nice benefit of implementing a service worker is ability to prompt your visitors to add a website shortcut on their phone homescreens. It will look just like any other mobile application launch button and open in a webview automatically. It’s a first step towards making your website work like a &lt;em&gt;Progressive Web App&lt;/em&gt;. You need to meet a few more requirements though:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Your page has to be &lt;em&gt;served using HTTPS&lt;/em&gt;. But you do that already anyway, don’t you?&lt;/li&gt; &lt;li&gt;You need to &lt;em&gt;prepare the icon&lt;/em&gt; for the app shortcut. Usually, your site logo will do just fine.&lt;/li&gt; &lt;li&gt;You have to provide a &lt;em&gt;manifest file&lt;/em&gt;. The easiest way to create it is using some online generator, like &lt;a href=&quot;https://app-manifest.firebaseapp.com/&quot;&gt;this one&lt;/a&gt;.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Once you’ve accomplished all of these tasks and have a working SW, Chrome will prompt visitors to add shortcut automatically.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/Screenshot_2019-04-07-14-23-47-738_com.android.chrome_q0rwob&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/Screenshot_2019-04-07-14-23-47-738_com.android.chrome_q0rwob 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/Screenshot_2019-04-07-14-23-47-738_com.android.chrome_q0rwob 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/Screenshot_2019-04-07-14-23-47-738_com.android.chrome_q0rwob 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/Screenshot_2019-04-07-14-23-47-738_com.android.chrome_q0rwob 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/Screenshot_2019-04-07-14-23-47-738_com.android.chrome_q0rwob 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/Screenshot_2019-04-07-14-23-47-738_com.android.chrome_q0rwob 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;figcaption class=&quot;figure__caption&quot;&gt;Google Chrome suggests adding a home screen shortcut.&lt;/figcaption&gt; &lt;/figure&gt; &lt;h2 id=&quot;conclusions&quot;&gt;Conclusions&lt;/h2&gt; &lt;p&gt;In a brief example, we’ve demonstrated how you can use service workers to improve the overall user experience—especially on mobile devices. In a real world scenario, we would need to add a few more moving parts like syncing up the caches in the background (when new content comes up) but hopefully we’ve at least gave you a little headstart. &lt;em&gt;Progessive Web Apps&lt;/em&gt; are way to go these days and running a service worker is one of key requirements to make your app a progressive one.&lt;/p&gt;</content><author><name>Filip Vařecha</name></author><category term="javascript"/><category term="service workers"/><category term="progressive web apps"/><summary type="html">Hi there once again! I’m gonna close our little Building a simple company website the Hard Way series with a brief introduction to how service workers operate and why you should want them on your website, too. They’re cool and fancy, sometimes unnecessary, but likely still worth your time as I’m about to demonstrate.</summary></entry><entry xml:lang="cz"><title type="html">Kouzlo malých projektů</title><link href="https://fragaria.cz/blog/2019/03/29/kouzlo-malych-projektu/" rel="alternate" type="text/html" title="Kouzlo malých projektů"/><published>2019-03-29T07:00:00+00:00</published><updated>2019-03-29T07:00:00+00:00</updated><id>https://fragaria.cz/blog/2019/03/29/kouzlo-malych-projektu</id><content type="html" xml:base="https://fragaria.cz/blog/2019/03/29/kouzlo-malych-projektu/">&lt;p&gt;Měsíce nebo roky vyvíjet nějaký velký propracovaný systém je zábava a tak. Když se ale zpětně ohlédnu na všechny své projekty, tak mi až překvapivě velkou radost udělali i drobnosti, jejichž vytvoření zabralo jednotky hodin. V článku se vám pochlubím svým TOP 3 žebříčkem.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile figure--wide&quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/kouzlo-malych-projektu-hero_n5emzb&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/kouzlo-malych-projektu-hero_n5emzb 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/kouzlo-malych-projektu-hero_n5emzb 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/kouzlo-malych-projektu-hero_n5emzb 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/kouzlo-malych-projektu-hero_n5emzb 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/kouzlo-malych-projektu-hero_n5emzb 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/kouzlo-malych-projektu-hero_n5emzb 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;p&gt;Aby bylo jasno, nemluvím o naprogramování sto padesátého todo listu s využitím nejnovějšího frameworku. Myslím případy, kdy mně někdo z okolí řekl o svém reálném problému a já ho nějak jednoduše softwarově vyřešil. Společnými jmenovateli těchto pár mini-projektů bylo tedy, že byly určeny pro někoho koho znám, jejich realizace byla velice rychlá, provoz levný nebo zdarma, a hlavně že v podstatě bez jakékoliv údržby dobře slouží už několik let.&lt;/p&gt; &lt;h2 id=&quot;projekt-1-správa-revizí&quot;&gt;Projekt #1: správa revizí&lt;/h2&gt; &lt;p&gt;Můj tchán je elektrikář. Ač to není jeho hlavní činnost, tak během roku provede nižší desítky revizí hromosvodů nebo různých elektrických zařízení.&lt;/p&gt; &lt;p&gt;Revize si eviduje v Excelu, a tak na jednom místě přehledně vidí, co kdy a kde realizoval. Zadání je triviální: chce aby jej software na základě této tabulky upozornil, že některá z revizí brzy vyprší. Díky tomu se totiž může zákazníkovi ozvat a nabídnout mu opětovné provedení revize.&lt;/p&gt; &lt;p&gt;Moje krátká úvaha:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;Co si vždy datum vypršení revize poznačit i do kalendáře na mobilu? Ne. Je to ruční práce navíc, na kterou se snadno zapomene.&lt;/li&gt; &lt;li&gt;Přidat do Excelu makro. Jak ale zajistit aby se spouštělo samo?&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://www.google.com/sheets/about/&quot;&gt;Google Sheets&lt;/a&gt; aneb Excel v cloudu. Bez práce zajištěné zálohování a pohodlná dostupnost z nativní mobilní aplikace. Ač to nebylo vlastně úkolem, tak tohle chceme nezávisle na tom, co bude dál.&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;Teď už tedy jen zkusit zjistit jestli by šlo “makro” vytvořit i v Google Sheets, jak jej automaticky spouštět, a jak z makra v případě potřeby poslat mail.&lt;/p&gt; &lt;p&gt;Po chvilce zjišťuji, že vše jde velice snadno. &lt;a href=&quot;https://developers.google.com/apps-script/&quot;&gt;Google Apps Script&lt;/a&gt; je platforma v níž jde JavaScriptem programovat a rozšiřovat většina Google služeb. Skript se uloží přímo na Google Drive, k načtení tabulky se použije třída &lt;a href=&quot;https://developers.google.com/apps-script/reference/spreadsheet/spreadsheet-app&quot;&gt;SpreadsheetApp&lt;/a&gt;, automatické spouštění umí zařídit něco co se jmenuje &lt;a href=&quot;https://developers.google.com/apps-script/guides/triggers/installable&quot;&gt;Time-driven triggers&lt;/a&gt;, mail se snadno pošle pomocí &lt;a href=&quot;https://developers.google.com/apps-script/reference/mail/mail-app&quot;&gt;MailApp.sendEmail&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Zbytek už je jen trocha práce s datumy a textem. Výsledkem je tedy tabulka úplně stejná jako ta původní, pouze uložená v jiném “programu”. Skript se každý den spustí, projde datumy revizí a zkontroluje zda některá z nich v následujících 10 dnech nevyprší. Pokud ano, tak se údaje o ní pošlou v mailovém upozornění. A je hotovo.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/sprava-revizi_rplnya&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/sprava-revizi_rplnya 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/sprava-revizi_rplnya 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/sprava-revizi_rplnya 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/sprava-revizi_rplnya 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/sprava-revizi_rplnya 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/sprava-revizi_rplnya 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;p&gt;Pro zajímavost odkazuji na &lt;a href=&quot;https://gist.github.com/osramek/6bf407660e64079031424d6f681fce4b&quot;&gt;řešení&lt;/a&gt;. Kód je napsaný spíše rychle než pěkně, a trochu jej komplikuje rozdělení na revize hromosvodů a elektrických zařízení (kontrolují se tedy 2 sloupečky). I tak má ale všeho všudy 90 řádků.&lt;/p&gt; &lt;p&gt;&lt;em&gt;Pozn.&lt;/em&gt; V dnešní době bych při stejném zadání zvážil, zda by nešlo použít nějakou službu typu &lt;a href=&quot;https://ifttt.com/&quot;&gt;IFTTT&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;projekt-2-nákupní-pomocník&quot;&gt;Projekt #2: nákupní pomocník&lt;/h2&gt; &lt;p&gt;Kamarádka v jistém zahraničním e-shopu nakupuje zboží, které pak přeprodává v ČR. E-shop trochu ve velkoobchodním stylu nabízí formulář na hromadné ověření dostupnosti zboží. Zboží je často vyprodáno, a dotazování přes formulář je nejlepší možný způsob, jak nepřijít o zajímavé nákupy.&lt;/p&gt; &lt;p&gt;Ručním vyplňováním formuláře kamarádka trávila spoustu času a nabízelo se zkusit tento úkon pomocí nějakého software automatizovat. Jako první krok, jsme se domluvili, že vytvořím program, který bude umět vyplněný formulář uložit a někdy později jedním klikem zpět načíst.&lt;/p&gt; &lt;p&gt;Z programátorského pohledu tedy potřebuji spustit JavaScript, který poběží v kontextu stránky třetí strany, a bude tak mít možnost z &lt;a href=&quot;https://en.wikipedia.org/wiki/Document_Object_Model&quot;&gt;DOMu&lt;/a&gt; údaje vytáhnout, případně DOM modifikovat.&lt;/p&gt; &lt;p&gt;Toho by šlo dosáhnout vlastním rozšířením do prohlížeče, ale toto řešení mě tehdy nejspíš ani nenapadlo. Automaticky jsem sáhl dle mého názoru po lepší variantě, a tou je &lt;a href=&quot;https://en.wikipedia.org/wiki/Bookmarklet&quot;&gt;bookmarklet&lt;/a&gt;. Co na tom, že tato “technologie” má už vrchol své slávy nejspíše za sebou, dovolí mi lehce vyřešit můj úkol. A proč si myslím, že to byla lepší varianta? Snadnější vytvoření, triviální “instalace” a nezávislost na prohlížeči. Později kamarádka opravdu ocenila, že program jde spouštět i na iOS zařízení v mobilním Safari. Kód samotného bookmarkletu je triviální, v podstatě jen načítá a spouští externí JS soubor se samotným programem. Tímto trikem totiž dosáhneme bezproblémové aktualizace. Kód bookmarkletu zůstává pořád stejný, a přesto pouhou změnou externího JS změníme chování bookmarkletu. Vše bez jakéhokoliv zásahu uživatele.&lt;/p&gt; &lt;p&gt;Zbývalo vyřešit kam ukládat data, tj. jednotlivá vyplnění formuláře. Data nemohla být uložena lokálně, takže jako cestu nejmenšího odporu jsem tehdy vybral platformu &lt;a href=&quot;https://en.wikipedia.org/wiki/Parse_(platform)&quot;&gt;Parse&lt;/a&gt;. Později když byla služba zrušena, jsem ji snadno nahradil pomocí &lt;a href=&quot;https://firebase.google.com/&quot;&gt;Firebase&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;V krátkosti ještě shrnu projekt z uživatelského pohledu. Až bylo hotovo, tak jsem kamarádce poslal mail s odkazem na statickou www stránku. Tam byl umístění samotný bookmarklet s popisem jak si jej přidat do prohlížeče (obyčejným přetažením na lištu záložek, kouzlo!). Pak kamarádka přešla na stránky e-shopu a klikla na svou novou záložku. Do horní části stránky se přidalo rozhraní pro ovládání programu, tak jak je znázorněno na screenshotu níže. Existuje tedy 80 různých pozic z nichž každá obsahuje jedno konkrétní vyplnění celého formuláře. Vyplněné formuláře se tak dají velice jednoduše ukládat, načítat a případně i přepisovat.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile figure--wide&quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/nakupni-pomocnik_kdtcpr&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/nakupni-pomocnik_kdtcpr 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/nakupni-pomocnik_kdtcpr 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/nakupni-pomocnik_kdtcpr 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/nakupni-pomocnik_kdtcpr 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/nakupni-pomocnik_kdtcpr 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/nakupni-pomocnik_kdtcpr 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;p&gt;Tento projekt jsme pak společně ještě trochu rozvíjeli, ale toto byl ten funkční základ. Přestože vytvoření trvalo jednotky hodin a jednalo se zhruba o 110 řádků kódu, byl prográmek svému novému majiteli hodně užitečný a ušetřil spoustu času.&lt;/p&gt; &lt;h2 id=&quot;projekt-3-web-školky&quot;&gt;Projekt #3: web školky&lt;/h2&gt; &lt;p&gt;Tohle někomu bude asi připadat divné, ale klidně se přiznám. Jeden z projektů co mi udělal radost byl úplně obyčejný web na WordPressu.&lt;/p&gt; &lt;p&gt;Školka mých dětí potřebovala webové stránky, tak jsem se nabídl, že je udělám. Koupil jsem doménu a dal se do průzkumu trhu. Už si přesně nepamatuju detaily, ale vím jistě, že se to hodně zvrtlo. Hostované služby typu &lt;a href=&quot;https://www.webnode.cz/&quot;&gt;Webnode&lt;/a&gt; se mi nelíbily nebo nechtěly platit, WordPress je přece starý pomalý moloch, statické generátory byly cool, ale šablony byly mizerné a jak by vlastně školka web aktualizovala? Matně si vzpomínám že původně zamýšlený průzkum se neskutečně protáhl. Jen jako ve flashbacku vidím scénu, kdy pomocí nějakého minimalistického CSS frameworku kóduju responzivní menu…&lt;/p&gt; &lt;p&gt;Naštěstí mě pak něco osvítilo, a přestal jsem řešit blbosti. Během pár hodin jsem na svůj běžící VPS nainstaloval &lt;a href=&quot;https://wordpress.org/&quot;&gt;WordPress&lt;/a&gt;, zapnul standardní šablonu &lt;a href=&quot;https://wordpress.org/themes/twentyfifteen/&quot;&gt;Twenty Fifteen&lt;/a&gt;, na fotobance koupil za pár dolarů pěkně barevnou ilustraci na pozadí a bylo hotovo. Nějakou dobu zabrala struktura webu a plnění obsahem, ale vše šlo rychle a hlavně naprosto hladce. Další požadavky ze školky vždy už byly jen otázkou krátkého hledání a několika kliků v adminu.&lt;/p&gt; &lt;p&gt;A že jsem si při tomhle mini-projektu vůbec nezaprogramoval? Nevadí. Myslím že právě díky tomu, se dostal i na tento můj TOP 3 seznam. S minimálním úsilím jsem totiž vyřešil předložený problém. Web vypadá pěkně, bezproblémově funguje na jakémkoliv zařízení, administrace je snadná, vedení školky nadšené.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile figure--wide&quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/web-skolky_kq2qhn&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/web-skolky_kq2qhn 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/web-skolky_kq2qhn 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/web-skolky_kq2qhn 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/web-skolky_kq2qhn 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/web-skolky_kq2qhn 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/web-skolky_kq2qhn 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;h2 id=&quot;závěr&quot;&gt;Závěr&lt;/h2&gt; &lt;p&gt;Bez jakékoliv diskuze velké nebo složité projekty mají něco do sebe. Na druhou stranu se někdy za sebou člověk ohlédne a zjistí, že za uplynulý týden projekt zas tak moc neposunul.&lt;/p&gt; &lt;p&gt;Projekty popsané v tomto článku jsou opravdu miniaturní. První dva mají jediného uživatele a web školky v malém městě taky netrhá rekordy v návštěvnosti.&lt;/p&gt; &lt;p&gt;Přesto mám z projektů radost. Pokud bych to sečetl, tak jsem totiž během zhruba 2 dnů dokázal realizovat 3 projekty pro 3 různé “zákazníky”. A uznejte, koho z nás netěší pohled na spokojeného zákazníka?&lt;/p&gt;</content><author><name>Ondřej Šrámek</name></author><category term="google apps script"/><category term="google sheets"/><category term="javascript"/><category term="dom"/><category term="bookmarklet"/><category term="parse"/><category term="firebase"/><category term="wordpress"/><summary type="html">Měsíce nebo roky vyvíjet nějaký velký propracovaný systém je zábava a tak. Když se ale zpětně ohlédnu na všechny své projekty, tak mi až překvapivě velkou radost udělali i drobnosti, jejichž vytvoření zabralo jednotky hodin. V článku se vám pochlubím svým TOP 3 žebříčkem.</summary></entry><entry xml:lang="en"><title type="html">Runtime configuration in web applications</title><link href="https://fragaria.cz/blog/2019/02/05/runtime-configuration-in-web-applications/" rel="alternate" type="text/html" title="Runtime configuration in web applications"/><published>2019-02-05T07:59:00+00:00</published><updated>2019-02-05T07:59:00+00:00</updated><id>https://fragaria.cz/blog/2019/02/05/runtime-configuration-in-web-applications</id><content type="html" xml:base="https://fragaria.cz/blog/2019/02/05/runtime-configuration-in-web-applications/">&lt;p&gt;Every time you start to develop a new frontend application, you are happy with a single instance. But then it gains traction and suddenly you are in need of multiple separate installations — be it for &lt;a href=&quot;https://en.wikipedia.org/wiki/Quality_assurance&quot;&gt;QA&lt;/a&gt;, demonstrations or other purposes. And you are suddenly facing a new problem: How do I inject the instances with configuration values that are different for each environment?&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile figure--wide&quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/cargo-cargo-container-clouds-1427541_f5dhrn&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/cargo-cargo-container-clouds-1427541_f5dhrn 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/cargo-cargo-container-clouds-1427541_f5dhrn 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/cargo-cargo-container-clouds-1427541_f5dhrn 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/cargo-cargo-container-clouds-1427541_f5dhrn 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/cargo-cargo-container-clouds-1427541_f5dhrn 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/cargo-cargo-container-clouds-1427541_f5dhrn 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;h2 id=&quot;traditional-way&quot;&gt;Traditional way&lt;/h2&gt; &lt;p&gt;In the early days, these values, such as an URL of your API, used to be hardcoded in your application and it was a pain to change them all.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'http://api.example.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// do stuff&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Then it became quite common to put them into a separate file. That led to multiple environment-specific files.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ENVIRONMENT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'production'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'./config'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// } else if (process.env.ENVIRONMENT === 'staging') {&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// } else if (process.env.ENVIRONMENT === 'qa') {&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'./config-dev'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;API_URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// do stuff&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Then somebody figured out that having multiple files does not really scale well. If you need a new environment, you need to commit a new file and particularly for short-lived environments that became an unwanted overhead.&lt;/p&gt; &lt;p&gt;So the environment variables started to be used directly and the apps became full of calls to &lt;code class=&quot;highlighter-rouge&quot;&gt;process.env.VARIABLE&lt;/code&gt; which is seemingly great and works really well.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;API_URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// do stuff&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;And if you combine these things, you end up with something like &lt;a href=&quot;https://www.npmjs.com/package/dotenv&quot;&gt;dotenv&lt;/a&gt;, which is a really nice, portable solution that scales well. There are of course many other flavours of this and an exhaustive list of them can be found in &lt;a href=&quot;https://medium.freecodecamp.org/environment-settings-in-javascript-apps-c5f9744282b6&quot;&gt;this article&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;docker-comes-into-play&quot;&gt;Docker comes into play&lt;/h2&gt; &lt;p&gt;Unfortunately, there is one common issue with all these solutions: &lt;strong&gt;All of the options are resolved during build time.&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;Modern Javascript applications are distributed as optimized packages (built by &lt;a href=&quot;https://webpack.js.org/&quot;&gt;Webpack&lt;/a&gt; or &lt;a href=&quot;https://parceljs.org/&quot;&gt;Parcel&lt;/a&gt;) and that’s perfectly fine. But the &lt;code class=&quot;highlighter-rouge&quot;&gt;process.env&lt;/code&gt; statements get replaced by the actual values during build phase and that’s it.&lt;/p&gt; &lt;p&gt;Why is that a problem? Well, if you have many environments and your application is run as, let’s say &lt;a href=&quot;https://www.docker.com&quot;&gt;Docker&lt;/a&gt; containers, you need to have as many builds as there are environments.&lt;/p&gt; &lt;p&gt;And that is hell.&lt;/p&gt; &lt;p&gt;The typical &lt;code class=&quot;highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt; for a frontend Javascript application might look like this:&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;FROM mhart/alpine-node:10 RUN apk update &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apk upgrade &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apk add &lt;span class=&quot;nt&quot;&gt;--no-cache&lt;/span&gt; bash git openssh WORKDIR /usr/src/app COPY package&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.json ./ RUN npm &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;COPY &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; ARG NODE_ENV ARG API_URL RUN npm run build CMD &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;npm&quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&quot;run&quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&quot;start&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;So you install your dependencies, &lt;em&gt;build the application bundle&lt;/em&gt; with variables provided by &lt;code class=&quot;highlighter-rouge&quot;&gt;ARG&lt;/code&gt; statements and then start some basic webserver that serves the built artifact to the public.&lt;/p&gt; &lt;p&gt;The problem here is, that only the &lt;code class=&quot;highlighter-rouge&quot;&gt;CMD&lt;/code&gt; statement is run during the container startup. Everything else is done during build time. So you have no way of injecting anything into the resulting bundle. That does not really help, does it?&lt;/p&gt; &lt;p&gt;&lt;em&gt;Sidenote: There are of course some environment variables common to all of your environments such as commit hash, version number etc. Keep them hardcoded with &lt;code class=&quot;highlighter-rouge&quot;&gt;process.env&lt;/code&gt; calls, there is no harm in that.&lt;/em&gt;&lt;/p&gt; &lt;h2 id=&quot;environment-agnostic-builds&quot;&gt;Environment-agnostic builds&lt;/h2&gt; &lt;p&gt;So how can this be solved? We apparently have to populate the configuration during the &lt;code class=&quot;highlighter-rouge&quot;&gt;CMD&lt;/code&gt; statement. But how?&lt;/p&gt; &lt;p&gt;The answer is simple: &lt;strong&gt;Don’t include your configuration into your builds.&lt;/strong&gt; Cool. But can you give me a simple checklist?&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile figure--wide&quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/change-choices-choose-277615_gnx2al&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/change-choices-choose-277615_gnx2al 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/change-choices-choose-277615_gnx2al 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/change-choices-choose-277615_gnx2al 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/change-choices-choose-277615_gnx2al 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/change-choices-choose-277615_gnx2al 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/change-choices-choose-277615_gnx2al 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;figcaption class=&quot;figure__caption&quot;&gt;Many environments ahead of you&lt;/figcaption&gt; &lt;/figure&gt; &lt;ol&gt; &lt;li&gt;Change all calls to &lt;code class=&quot;highlighter-rouge&quot;&gt;process.env&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;window.env&lt;/code&gt; (Yes, I know that globals are ugly. Deal with it.) or anything you want such as &lt;code class=&quot;highlighter-rouge&quot;&gt;window.myShinyUnicorn&lt;/code&gt;. The only important thing is that it’s something that is provided &lt;strong&gt;by the browser and not your build tool&lt;/strong&gt;.&lt;/li&gt; &lt;li&gt; &lt;p&gt;Create a config file with defaults, such as &lt;code class=&quot;highlighter-rouge&quot;&gt;env.js&lt;/code&gt;.&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;API_URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://api.example.com'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Load this file &lt;em&gt;before&lt;/em&gt; everything else in your HMTL. Check with your build system where it injects the compiled Javascript files. The config file has to be the first thing your application loads.&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; ... &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/env.js&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt; ... &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Change your startup script used in a &lt;code class=&quot;highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt; so that it replaces the contents of the config file and only &lt;strong&gt;after that&lt;/strong&gt; runs the application. We are for instance using a trivial shell script called &lt;code class=&quot;highlighter-rouge&quot;&gt;build-env-file.sh&lt;/code&gt; for that. Make sure that you replace the config file in the actual location that is served by your webserver.&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;window.env = { API_URL: &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$API_URL&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; };&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; ./public/env.js &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Run your docker images like this:&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker run &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;API_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;https://production-api.example.com my-docker-image &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker run &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;API_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;https://staging-api.example.com my-docker-image &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;And that’s it. You have just prepared your application for a happy future-proof multi-environment life.&lt;/p&gt; &lt;h2 id=&quot;why-is-this-even-a-thing&quot;&gt;Why is this even a thing?&lt;/h2&gt; &lt;p&gt;Of course this is not a new problem, it has been around at least since &lt;a href=&quot;https://stackoverflow.com/questions/5018456/environment-specific-build-vs-loading-environment-specific-properties&quot;&gt;Java&lt;/a&gt; and basically all other programs that need to be built before they are used by the consumers.&lt;/p&gt; &lt;p&gt;In the web community, I believe this has become a topic only after &lt;a href=&quot;https://www.heroku.com/&quot;&gt;Heroku&lt;/a&gt; &lt;a href=&quot;https://blog.heroku.com/twelve-factor-apps&quot;&gt;published&lt;/a&gt; their &lt;a href=&quot;https://12factor.net&quot;&gt;12 factor methodology&lt;/a&gt; in 2013. The methodology basically leads developers towards building reusable artifacts and external configuration is one of the important factors in that venture.&lt;/p&gt; &lt;p&gt;Heroku itself &lt;a href=&quot;https://github.com/mars/create-react-app-buildpack#compile-time-vs-runtime&quot;&gt;supports a variant&lt;/a&gt; of a solution described in this article for React based app with &lt;a href=&quot;https://github.com/mars/heroku-js-runtime-env&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@mars/heroku-js-runtime-env&lt;/code&gt;&lt;/a&gt; package. It does not use a special file, but rather injects the variables directly into your code. I personally have not used it before, but this approach might be a safer option for you than exposing configuration on a special endpoint.&lt;/p&gt; &lt;p&gt;In the end, I really believe that if your applications are running in multiple environments and somewhere in the clouds, you should aspire for single application builds that can be run over and over with different configurations.&lt;/p&gt;</content><author><name>Jirka Chadima</name></author><category term="javascript"/><category term="webpack"/><category term="configuration"/><summary type="html">Every time you start to develop a new frontend application, you are happy with a single instance. But then it gains traction and suddenly you are in need of multiple separate installations — be it for QA, demonstrations or other purposes. And you are suddenly facing a new problem: How do I inject the instances with configuration values that are different for each environment?</summary></entry><entry xml:lang="en"><title type="html">Building a simple company website the Hard Way: Vertical rhythm</title><link href="https://fragaria.cz/blog/2018/11/12/building-a-simple-company-website-the-hard-way-vertical-rhythm/" rel="alternate" type="text/html" title="Building a simple company website the Hard Way: Vertical rhythm"/><published>2018-11-12T09:00:00+00:00</published><updated>2018-11-12T09:00:00+00:00</updated><id>https://fragaria.cz/blog/2018/11/12/building-a-simple-company-website-the-hard-way-vertical-rhythm</id><content type="html" xml:base="https://fragaria.cz/blog/2018/11/12/building-a-simple-company-website-the-hard-way-vertical-rhythm/">&lt;p&gt;Websites with good vertical rhythm are more aesthetically pleasing and generally feel more consistent. While understanding vertical rhythm rules is simple, maintaing it on bigger websites becomes challenging. But challenges are fun, aren’t they? Read on!&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile figure--wide&quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;section class=&quot;box&quot;&gt; &lt;p&gt;This article is a part of the &lt;i&gt;Building a simple company website the Hard Way&lt;/i&gt; series.&lt;/p&gt; &lt;ol&gt; &lt;li&gt;&lt;a href=&quot;/blog/2018/09/03/building-a-simple-company-website-the-hard-way-typography-intro/&quot;&gt;Typography introduction&lt;/a&gt;&lt;/li&gt; &lt;li&gt;Vertical rhythm&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;/blog/2019/04/08/building-a-simple-company-website-the-hard-way-service-workers/&quot;&gt;Service workers&lt;/a&gt;&lt;/li&gt; &lt;/ol&gt; &lt;/section&gt; &lt;h2 id=&quot;vertical-rhythm&quot;&gt;Vertical rhythm?&lt;/h2&gt; &lt;p&gt;Let’s start with a little bit of theory first. What exactly is &lt;em&gt;vertical rhythm&lt;/em&gt;? Simply said, it describes combination of two properties of written text:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;a line height&lt;/li&gt; &lt;li&gt;element spacings (think margins and paddings)&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;By mixing up these properties you can either end up with a page that looks chaotic or—when you’re careful—with website that feels natural and pleasing. To get a grasp of the principle, consider these two designs:&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile figure--wide&quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__1_yjlap0&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__1_yjlap0 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__1_yjlap0 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__1_yjlap0 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__1_yjlap0 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__1_yjlap0 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__1_yjlap0 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;figcaption class=&quot;figure__caption&quot;&gt;The Good, the Bad and the Ugly.&lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;Even without the baseline grid attached you would probably say that the one on the left just feels right: it’s easier to read, more balanced and it generally looks more professional. While the one on the right feels rather awkward. Good rhythm inherently brings this feel of natural flow and—similarly to how music rhythm works—improves readability and the looks of the text. Even if you are not a musician, you would probably notice when the rhythm is erratic. The same applies to written text. This principle relates to how our brains work, the key word here is &lt;a href=&quot;https://en.wikipedia.org/wiki/Pattern_recognition_(psychology)&quot;&gt;pattern recognition&lt;/a&gt;.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__3_ex0yyd&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__3_ex0yyd 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__3_ex0yyd 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__3_ex0yyd 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__3_ex0yyd 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__3_ex0yyd 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__3_ex0yyd 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;figcaption class=&quot;figure__caption&quot;&gt;Vertical rhythm is somewhat similar to rhythm in music.&lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;When there is a pattern (&lt;em&gt;~rhythm&lt;/em&gt;), the brain has less work to decode the message. When the pattern lacks, text is more difficult (and exhausing) to read. And from the &lt;a href=&quot;/blog/2018/09/03/building-a-simple-company-website-the-hard-way-typography-intro/&quot;&gt;previous series part&lt;/a&gt; we know this is &lt;em&gt;dangerous&lt;/em&gt;.&lt;/p&gt; &lt;p&gt;Good. Now we know rhythm is imporant. The big question is: &lt;em&gt;how do we maintain it&lt;/em&gt;? Surprisingly, there are only two basic rules: &lt;em&gt;multiples of line height&lt;/em&gt; and &lt;em&gt;consistency&lt;/em&gt;.&lt;/p&gt; &lt;h3 id=&quot;multiples-of-line-height&quot;&gt;Multiples of line height&lt;/h3&gt; &lt;p&gt;The core principle behind good vertical rhythm is quite simple: choose appropriate line height and use it as the grid unit. Keep all the spacings between elements on the page as &lt;em&gt;multiples of it&lt;/em&gt;.&lt;/p&gt; &lt;p&gt;A common practice is to &lt;em&gt;set the line height to 120–150% of the font size&lt;/em&gt;. This means it all starts with the font size selection. Many people choose &lt;em&gt;16px as base&lt;/em&gt;, because browsers use this as the default value, but you are free to choose whatever you like. We chose 18px for this site. Once you’ve decided about the base font size, decide about the line height. Most of the time, 150% of font size works well and we did the same on this site. Line height is set to 27px (18px × 1.5).&lt;/p&gt; &lt;p&gt;Then, when designing the site, keep in mind this simple rule:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Element spacing shall be kept as multiples of your line height.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;For example, if your line height is 24px, you would set your spacings to 48px (2 × 24), 72px (3 × 24), 96px (4 × 24) and so on. You could also use 12px as it’s 0.5 × 24. All the multiples are OK as long as you don’t create dozens of combinations and keep things simple and &lt;em&gt;consistent&lt;/em&gt;.&lt;/p&gt; &lt;h3 id=&quot;consistency&quot;&gt;Consistency&lt;/h3&gt; &lt;p&gt;Consistency is important beacuse it simplifies orientation and greatly contributes to a natural rhythmic feel of the text. Having the spacings properly sized but inconsistent would not make the reading any simpler for the reader. Taking inspiration from the music again, most songs have verses that repeat throughout the song in consistent matter.&lt;/p&gt; &lt;p&gt;Keeping things consistent means estabilishing some rules upfront. This is up to you, there are no strict rules. A good way to do it is to think &lt;em&gt;semantically&lt;/em&gt; about the elements. Allow bigger space when the reader should realize context changed. Use smaller space when just dividing paragraphs. Let the text speak for itself.&lt;/p&gt; &lt;h2 id=&quot;challenges-on-the-horizon&quot;&gt;Challenges on the horizon&lt;/h2&gt; &lt;p&gt;As you can probably imagine, the math can quicky get tedious when your website grows. I definitely recommend using a CSS preprocessor such as &lt;a href=&quot;https://sass-lang.com/&quot;&gt;SASS&lt;/a&gt; and defining your grid size globally. This then allows you to write the grid unit either as a &lt;em&gt;variable&lt;/em&gt;:&lt;/p&gt; &lt;div class=&quot;language-scss highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$base-font-size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;16px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* ~1rem */&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$grid-unit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$base-font-size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* ~1.5rem */&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* a rule */&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;h1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;margin-bottom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$grid-unit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;or as a &lt;em&gt;function&lt;/em&gt;:&lt;/p&gt; &lt;div class=&quot;language-scss highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$base-font-size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;16px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;gu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$multiplier&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@return&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$base-font-size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$multiplier&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* a rule */&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;h1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;margin-bottom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;gu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;the-baseline-problem&quot;&gt;The baseline problem&lt;/h3&gt; &lt;p&gt;A &lt;em&gt;baseline&lt;/em&gt; is the invisible line on which most letters sit. The following figure demonstrates it quite well:&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile figure--wide&quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__4_jal5ik&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__4_jal5ik 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__4_jal5ik 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__4_jal5ik 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__4_jal5ik 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__4_jal5ik 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__4_jal5ik 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;figcaption class=&quot;figure__caption&quot;&gt;Baseline, line-height, font-size and cap height explained, author: &lt;a href=&quot;https://medium.com/@razvanonofrei/aligning-type-to-baseline-the-right-way-using-sass-e258fce47a9b&quot;&gt;Razvan Onofrei&lt;/a&gt;&lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;The space between individual baselines then forms the baseline grid and we know this distance is our grid unit, the size of our line height. Go on and toggle the baseline grid on this website by clicking &lt;a href=&quot;#&quot; onclick=&quot;window.toggleGrid(); return false;&quot;&gt;here&lt;/a&gt;. See how all the lines sit nicely on it?&lt;/p&gt; &lt;p&gt;When working on you vertical rhythm rules, you will quickly find out that achieving the looks of the introductory image (where each text line is nicely put on the baseline) is not as simple as merely expressing your spacings as multiples of line height.&lt;/p&gt; &lt;p&gt;The reason for that is that web browsers &lt;em&gt;in fact do not recognize the concept of baseline&lt;/em&gt;. Instead, text is put approximately in the middle of the line height (see the image above again for the reference).&lt;/p&gt; &lt;p&gt;This gets problematic when you want to use your baseline for element arrangment. Often, you want to arrange your boxes to match the baseline. This is especially true for multi–column content.&lt;/p&gt; &lt;p&gt;So, we need to deal with this somehow. For long, people thought baseline alignment was not possible in CSS. It turns out that—with some SASS dark magic—it’s doable. In order to acheive the desired effect we need to &lt;em&gt;shift every text&lt;/em&gt; downwards by a specific amount it needs to fit nicely on the baseline. Your initial thought might be:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Subtract font-size from line-height, divide that by two and shift the text down by that difference.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;Kinda, but not quite. It turns out that what you really need to deal with is not the &lt;em&gt;font-size&lt;/em&gt;, but the &lt;em&gt;cap height&lt;/em&gt; of each font. Unfortunately, it’s not straightforward to get the cap height value. If you’re lucky enough, you can google it. If not, you will need to either measure it or try and guess until you see it fits.&lt;/p&gt; &lt;p&gt;Assuming you have &lt;code class=&quot;highlighter-rouge&quot;&gt;$line-height&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;$font-size&lt;/code&gt; in pixels and &lt;code class=&quot;highlighter-rouge&quot;&gt;$cap-height&lt;/code&gt; as ratio of font size (e.g. 0.79 means 79% of the font size is the actual cap height), following formula can be used:&lt;/p&gt; &lt;div class=&quot;language-scss highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$shift&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$line-height&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$font-size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$cap-height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Make sure to use the above image for the reference on the formula.&lt;/p&gt; &lt;p&gt;Once we have the shift, we need to move our text downwards on the baseline. We can do that easily by adding &lt;code class=&quot;highlighter-rouge&quot;&gt;padding-top&lt;/code&gt;. Unfortunately, this has a side-effect: it pushes the elements below the one in question, too. In order to compensate, we need to set the same value multiplied by –1 as our &lt;code class=&quot;highlighter-rouge&quot;&gt;margin-bottom&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;If you’re interested in details of the algorithm, please look at the &lt;a href=&quot;https://medium.com/@razvanonofrei/aligning-type-to-baseline-the-right-way-using-sass-e258fce47a9b&quot;&gt;blog post&lt;/a&gt; from the original inventor of the technique, Razvan Onofrei.&lt;/p&gt; &lt;p&gt;In order to use this globally, we’ll need some help with the math. This is where SASS enters the game. Let’s create some mixins for it. Take a look at the following example (a stripped down version of one of our mixins):&lt;/p&gt; &lt;div class=&quot;language-scss highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Base font size, equals to 1rem.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$rootsize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;16px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// One grid unit.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$grid-unit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;.5rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// ~ 24px&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Information about the font.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$font&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cap-height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;.75&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;font-family&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;'Andulka Text Pro', Georgia, Palatino, serif&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;gu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$multiplier&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@return&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$grid-unit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$multiplier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Assumes $size and $lineheight are passed in pixels.&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;@mixin&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;baseline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$lineheight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$size-rems&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;strip-unit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$rootsize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$capheight-rems&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$size-rems&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;map-get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$font&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cap-height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$lh-rems&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;strip-unit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$lineheight&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$rootsize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$shift&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$lh-rems&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$capheight-rems&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;font-family&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map-get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$font&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;font-family&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;font-size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$size-rems&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;padding-top&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$shift&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;margin-bottom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$shift&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;-1&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;line-height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$lh-rems&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;There are frameworks, too. You can use &lt;a href=&quot;https://sassline.com/&quot;&gt;sassline&lt;/a&gt; from the Razvan Onofrei (original author of the idea) or &lt;a href=&quot;https://jamonserrano.github.io/plumber-sass/&quot;&gt;plumber&lt;/a&gt; that implements this as a nice SASS library.&lt;/p&gt; &lt;p&gt;We originally tried Sassline but quickly realized it’s too restrictive and we didn’t really like all the rules it had introduced. So we decided to write our bunch of mixins to get the job done.&lt;/p&gt; &lt;h3 id=&quot;the-restrictive-line-height-problem&quot;&gt;The restrictive line-height problem&lt;/h3&gt; &lt;p&gt;This is best demonstrated by an example:&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile figure--wide&quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__2_hri4a5&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__2_hri4a5 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__2_hri4a5 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__2_hri4a5 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__2_hri4a5 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__2_hri4a5 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__2_hri4a5 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;figcaption class=&quot;figure__caption&quot;&gt;Line-height in direct multiples of grid unit is too restrictive sometimes. In this case on headings.&lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;As you can see on the image, headings on these two examples have different line height. The example on the left—albeit breaking the baseline grid—looks better (and reads better, too!). Well, I’ve not been totally honest with you:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Breaking the grid is OK and generally recommended if the readability should suffer otherwise.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;This rule has a sibling:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;When you break the baseline grid, make sure to join it again as soon as possible.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;Example image shows this well. The grid pace is restored once the heading has been dealt with.&lt;/p&gt; &lt;p&gt;Even though rules are simple, implmentation is not. The reason for that is that the margin compensation depends on &lt;em&gt;how many lines the heading spans&lt;/em&gt;. Looking at the picture it’s obvious that the margin compensation will be different if the heading takes one line, two lines and so on. When we’re off the grid, we’re simply off.&lt;/p&gt; &lt;p&gt;Therefore, some static SASS code won’t suffice. We’ll have to use something with more dynamic nature: JavaScript. We ought to calculate the margin compensation based on the actual height of the block element. Ultimately, we need to round the total element height to &lt;em&gt;nearest grid unit&lt;/em&gt;.&lt;/p&gt; &lt;p&gt;See the example code:&lt;/p&gt; &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// How many rem units is our line-height.&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;guRems&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// How many pixels is 1rem.&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;remSize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;parseFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getComputedStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;documentElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fontSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Size of 1 grid unit in pixels.&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;gridUnitSize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;remSize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;guRems&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fixBaseline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;elemStyle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;currentStyle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getComputedStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Actual element height *without* the margin.&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;elemBoundingHeight&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getBoundingClientRect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Current margin of the element in px.&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;elemBottomMargin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;elemStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;marginBottom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;parseFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;elemStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;marginBottom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Total height of the element in px.&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;elemHeight&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;elemBoundingHeight&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;elemBottomMargin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;elemHeightInGu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;elemHeight&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;gridUnitSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;marginBottomInGu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;elemBottomMargin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;gridUnitSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Height difference to nearest grid unit.&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;heightDecimalPartInGu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;elemHeightInGu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Compensated margin.&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;newMarginInGu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;heightDecimalPartInGu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;heightDecimalPartInGu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;marginBottomInGu&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;marginBottomInGu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;heightDecimalPartInGu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Set the new margin (keep rems).&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;marginBottom&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newMarginInGu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;guRems&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'rem'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;It’s quite straightforward. When dealing with the difference to the nearest grid unit, we either round up or down depending on what is closer. You might end up favoring one or the other. This can be easily adjusted by changing the &lt;code class=&quot;highlighter-rouge&quot;&gt;0.5&lt;/code&gt; to something else (in 0–1 range).&lt;/p&gt; &lt;p&gt;Applying this function to our elements (ones that are set to have line height other than integer multiple of grid unit) then turns out to be easy:&lt;/p&gt; &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;query&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'h1, h2, h3, .something-else-that-needs-fixing'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;forEachNode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nodelist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;nodelist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;nodelist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;forEachNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;querySelectorAll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fixBaseline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt; &lt;p&gt;We’ve covered some ideas on vertical rhythm. As we’ve found out, browser rendering engines unfortunately lack support for proper typography. We’ve described few tips on how to work around it ourselves. Let’s hope the rendering engines will improve at some point in future. Until then, we have two options:&lt;/p&gt; &lt;p&gt;a) Ignore the baseline troubles and focus just on the basics&lt;br /&gt; b) Put significant effort to make your website stand out&lt;/p&gt; &lt;p&gt;Since you’ve read all the way down to conclusion, I bet you might like the option two a bit more.&lt;/p&gt; &lt;p&gt;And in case you enjoyed the article, stay tuned for the next part of &lt;em&gt;Building a simple company website the Hard Way&lt;/em&gt; series. We’ll shed some light on &lt;a href=&quot;/blog/2019/04/08/building-a-simple-company-website-the-hard-way-service-workers/&quot;&gt;Service workers&lt;/a&gt;.&lt;/p&gt;</content><author><name>Filip Vařecha</name></author><category term="typography"/><category term="vertical rhythm"/><category term="baseline"/><category term="sass"/><category term="css"/><category term="fonts"/><summary type="html">Websites with good vertical rhythm are more aesthetically pleasing and generally feel more consistent. While understanding vertical rhythm rules is simple, maintaing it on bigger websites becomes challenging. But challenges are fun, aren’t they? Read on!</summary></entry><entry xml:lang="en"><title type="html">Building a simple company website the Hard Way: Typography intro</title><link href="https://fragaria.cz/blog/2018/09/03/building-a-simple-company-website-the-hard-way-typography-intro/" rel="alternate" type="text/html" title="Building a simple company website the Hard Way: Typography intro"/><published>2018-09-03T09:00:00+00:00</published><updated>2018-09-03T09:00:00+00:00</updated><id>https://fragaria.cz/blog/2018/09/03/building-a-simple-company-website-the-hard-way-typography-intro</id><content type="html" xml:base="https://fragaria.cz/blog/2018/09/03/building-a-simple-company-website-the-hard-way-typography-intro/">&lt;p&gt;Let’s face it: web is bloated with bad typography. Words like vertical rhythm, careful font selection and readability didn’t really make it to the web, it seems. Good news is, that it can be achieved and in this post, I will show you how to approach it.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile figure--wide&quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__2_se31j8&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__2_se31j8 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__2_se31j8 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__2_se31j8 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__2_se31j8 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__2_se31j8 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__2_se31j8 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;figcaption class=&quot;figure__caption&quot;&gt;Author: &lt;a href=&quot;https://www.flickr.com/photos/tarale/2897185492&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;Taryn&lt;/a&gt;; CC BY 2.0&lt;/figcaption&gt; &lt;/figure&gt; &lt;section class=&quot;box&quot;&gt; &lt;p&gt;This article is a part of the &lt;i&gt;Building a simple company website the Hard Way&lt;/i&gt; series.&lt;/p&gt; &lt;ol&gt; &lt;li&gt;Typography introduction&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;/blog/2018/11/12/building-a-simple-company-website-the-hard-way-vertical-rhythm/&quot;&gt;Vertical rhythm&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;/blog/2019/04/08/building-a-simple-company-website-the-hard-way-service-workers/&quot;&gt;Service workers&lt;/a&gt;&lt;/li&gt; &lt;/ol&gt; &lt;/section&gt; &lt;p&gt;A good typography definitely makes a difference. If you’re not familiar with the term, it describes the means how to make a written language &lt;em&gt;readable&lt;/em&gt; and &lt;em&gt;appealing&lt;/em&gt;. Having good typography on your website increases the chance that people read what you want to tell them. Having bad typography can result in people leaving your page immediately because they’re simply disgusted or not reading the whole thing because they will get tired soon.&lt;/p&gt; &lt;p&gt;Mastering typography is like mastering painting: it’s an artistic discipline of sorts. It takes years of practice to do it really well. But that doesn’t mean you can’t do anything about it for the time being. You can and the results will definitely be worth your effort. Let’s dive into it.&lt;/p&gt; &lt;h2 id=&quot;start-with-your-content-first&quot;&gt;Start with your content first&lt;/h2&gt; &lt;p&gt;It all starts right on your keyboard. Everything else will be useless unless your text is written well. It’s a broad topic and this little article can’t fully cover it. Good news it doesn’t need to because others already have done so previously. I recommend going through the excellent &lt;a href=&quot;https://practicaltypography.com/&quot;&gt;Butterick’s Practical Typography&lt;/a&gt; e-book. Well worth your time.&lt;/p&gt; &lt;h2 id=&quot;font-selection&quot;&gt;Font selection&lt;/h2&gt; &lt;p&gt;Selecting a bad font can easily ruin all the hard work you put into writing your valuable content. Internet is flooded with &lt;a href=&quot;https://fonts.google.com/&quot;&gt;Google Fonts&lt;/a&gt; nowadays. It’s free, it’s packed with options and everyone loves it. Unfortunately, the good old rule still applies here: &lt;em&gt;you get what you pay for&lt;/em&gt;.&lt;/p&gt; &lt;p&gt;Don’t get me wrong: I’m not saying that all Google Fonts are &lt;em&gt;bad&lt;/em&gt;. Certainly, there are exceptions like &lt;a href=&quot;https://fonts.google.com/specimen/Roboto&quot;&gt;Roboto&lt;/a&gt; or &lt;a href=&quot;https://fonts.google.com/specimen/Source+Code+Pro&quot;&gt;Source Code Pro&lt;/a&gt;. The problem is that number of well-made Google Fonts is relatively low. Which leads to the fact that the good ones are way too overused on the web. Ultimately, it’s the opposite of broad selection—you’re using fonts that are used by millions of websites, leaving behind your chance to stand out of crowd.&lt;/p&gt; &lt;p&gt;Fortunately, using Google Fonts is not the only way. There are many great font designers out there. Be ready to pay for it though as creating a quality font is no easy job; it takes hundereds of hours of work to do it well. And that’s why it’s worth the investment because professional font will have all the important font design aspects (like real &lt;em&gt;italics&lt;/em&gt; or &lt;em&gt;kerning&lt;/em&gt;) made just right.&lt;/p&gt; &lt;p&gt;For example, for our 2018 company website, we’ve chosen the fonts by Czech-based typeset foundry &lt;a href=&quot;https://www.stormtype.com/&quot;&gt;Storm Type&lt;/a&gt;. You can also buy from marketplaces that sell fonts by many different foundries, like Adobe’s &lt;a href=&quot;https://typekit.com/&quot;&gt;Typekit&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;There are no strict rules on how to choose your fonts. It’s all matter of personal taste and trial. But I will provide you with some general advice that can give you a little headstart:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Try various combinations and see what &lt;em&gt;works well together&lt;/em&gt;.&lt;/li&gt; &lt;li&gt;Avoid selecting multiple &lt;em&gt;similar fonts&lt;/em&gt;. Use your font selection to help your readers to differentiate various contexts easily.&lt;/li&gt; &lt;li&gt;Think of what your &lt;em&gt;website message&lt;/em&gt; is. Is it modern? Is it fancy? Is it serious? Your typeface selection might want to reflect that.&lt;/li&gt; &lt;li&gt;Avoid &lt;a href=&quot;https://practicaltypography.com/goofy-fonts.html&quot;&gt;goofy fonts&lt;/a&gt; by all means. No exceptions.&lt;/li&gt; &lt;li&gt;Use &lt;em&gt;low number of fonts&lt;/em&gt;. In most cases, two fonts shall suffice (body + headings). When adding a new font, always ask yourself: is that really necessary? Remember that there are various means of adding emphasis to your text. Different fonts should be considered as a last resort.&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;line-length&quot;&gt;Line length&lt;/h2&gt; &lt;p&gt;Line length is an essential and often neglected attribute of any written text. It’s been known for centuries that text is best readable when there are &lt;em&gt;45–90 characters per line&lt;/em&gt;. Interestingly, people seem to have forgotten that in the internet age.&lt;/p&gt; &lt;hr /&gt; &lt;p&gt;Compare this (approx. &lt;em&gt;100 characters&lt;/em&gt; per line):&lt;/p&gt; &lt;figure class=&quot;figure figure--wide figure--left&quot;&gt; &lt;p&gt;On July 16, 1969, the Apollo 11 spacecraft launched from the Kennedy Space Center in Florida. Its mission was to go where no human being had gone before—the moon! The crew consisted of Neil Armstrong, Michael Collins, and Buzz Aldrin.&lt;/p&gt; &lt;/figure&gt; &lt;p&gt;with this (approx. &lt;em&gt;65 characters&lt;/em&gt; per line):&lt;/p&gt; &lt;figure class=&quot;figure figure--left&quot;&gt; &lt;p&gt;On July 16, 1969, the Apollo 11 spacecraft launched from the Kennedy Space Center in Florida. Its mission was to go where no human being had gone before—the moon! The crew consisted of Neil Armstrong, Michael Collins, and Buzz Aldrin.&lt;/p&gt; &lt;/figure&gt; &lt;hr /&gt; &lt;p&gt;Can you &lt;em&gt;feel the difference&lt;/em&gt;? Many websites use even higher line length which can easily render the whole text unreadable (note: if you’re on mobile, it’s gonna look the same; see it on desktop instead).&lt;/p&gt; &lt;p&gt;When deciding whether the number of characters is OK, you can also use the &lt;em&gt;alphabet test&lt;/em&gt;. As a general rule of thumb, you should be able to fit between 2–3 full alphabets on one line.&lt;/p&gt; &lt;hr /&gt; &lt;figure class=&quot;figure figure--wide figure--left&quot;&gt; &lt;p&gt;abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstu&lt;/p&gt; &lt;/figure&gt; &lt;p&gt;… yields &lt;strong&gt;~3.8 alphabets&lt;/strong&gt;. That is too much.&lt;/p&gt; &lt;figure class=&quot;figure figure--left&quot;&gt; &lt;p&gt;abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijkl&lt;/p&gt; &lt;/figure&gt; &lt;p&gt;… yields &lt;strong&gt;~2.5 alphabets&lt;/strong&gt;, which is OK.&lt;/p&gt; &lt;hr /&gt; &lt;h2 id=&quot;hyphens&quot;&gt;Hyphens&lt;/h2&gt; &lt;p&gt;What are &lt;em&gt;hyphens&lt;/em&gt;? We all know them, they look like this: -. They have multiple uses but a common one is to put it at the end of line when a work breaks onto the next line. These little marks improve legibility of the text by adding more consistency to length of individual lines.&lt;/p&gt; &lt;p&gt;This has been automated for decades in text processors. It’s not well known that it can be also used &lt;em&gt;on the web&lt;/em&gt;. You can see it in action on this page.&lt;/p&gt; &lt;p&gt;Use the following CSS rule to turn it on:&lt;/p&gt; &lt;div class=&quot;language-scss highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;.hyphenate&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;-webkit-hyphens&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;auto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;-ms-hyphens&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;auto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;hyphens&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;auto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Hyphenation support is language-sensitive. Therefore, it is essential to set the right language for the given DOM node. E.g.:&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;article&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hyphenate&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;lang=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;en&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;...&lt;span class=&quot;nt&quot;&gt;&amp;lt;/article&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;If you don’t set it specifically for the given node, it will inherit the &lt;code class=&quot;highlighter-rouge&quot;&gt;lang&lt;/code&gt; attribute value from it’s ancestors. This means you should specify it at at least on the &lt;code class=&quot;highlighter-rouge&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;/code&gt; tag level (which is always a good idea).&lt;/p&gt; &lt;p&gt;Note: hyphenation support will vary for different languages (and with &lt;a href=&quot;caniuse.com/#search=hyphens&quot;&gt;different browsers&lt;/a&gt; for that matter). It’s not perfect, but from our experience it works quite well for both English and Czech languages. If you’re not satisfied with the browser hyphenation quality for your language, you can help the browser by using the &lt;em&gt;soft hyphen&lt;/em&gt; HTML entity (&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;amp;shy;&lt;/code&gt;) to give it advice on where it’s OK to break the word. As you can probably imagine this quickly gets tedious so you might want to use some tool to automate the process, like the &lt;a href=&quot;https://github.com/bramstein/hypher&quot;&gt;hypher&lt;/a&gt; JS library.&lt;/p&gt; &lt;h2 id=&quot;kerning-ligatures&quot;&gt;Kerning, ligatures&lt;/h2&gt; &lt;p&gt;These are font features that—similarly to hyphenation—have been used in typesetting programs since the beginning.&lt;/p&gt; &lt;p&gt;&lt;em&gt;Kerning&lt;/em&gt; is a name for spacing adjustments made to specific letter pairs. Taking an example from &lt;a href=&quot;5&quot;&gt;Practical Typography&lt;/a&gt; e-book, look at these two lines of text:&lt;/p&gt; &lt;hr /&gt; &lt;p&gt;Kerning disabled:&lt;/p&gt; &lt;p class=&quot;alpha&quot; style=&quot;font-kerning: none; -webkit-font-feature-settings: unset; font-feature-settings: unset;&quot;&gt; AY, Ty, Va, TAT &lt;/p&gt; &lt;p&gt;Kerning enabled:&lt;/p&gt; &lt;p class=&quot;alpha&quot; style=&quot;font-kerning: auto; -webkit-font-feature-settings: unset; font-feature-settings: unset;&quot;&gt; AY, Ty, Va, TAT &lt;/p&gt; &lt;hr /&gt; &lt;p&gt;Kerning adjusts spacing between letter pairs in a way that makes reading it easier. Default kerning setting in HTML is &lt;em&gt;on&lt;/em&gt;. But that will only happen if you have a font that has the kerning letter pairs defined. As mentioned previously, you can be sure that professional fonts do.&lt;/p&gt; &lt;p&gt;&lt;em&gt;Ligatures&lt;/em&gt; come from the days of metal font typesetting to avoid a problem, when some characters tended to collide in an unpleasant way. These collisions can happen with ‘f’ character for example. Consider this:&lt;/p&gt; &lt;hr /&gt; &lt;p&gt;Without ligatures:&lt;/p&gt; &lt;p class=&quot;alpha&quot; style=&quot;font-variant-ligatures: none; -webkit-font-feature-settings: unset; font-feature-settings: unset;&quot;&gt; &lt;span&gt;fi fj&lt;/span&gt; &lt;i&gt;fi fj&lt;/i&gt; &lt;/p&gt; &lt;p&gt;With ligatures:&lt;/p&gt; &lt;p class=&quot;alpha&quot; style=&quot;font-variant-ligatures: normal; -webkit-font-feature-settings: 'liga'; font-feature-settings: 'liga';&quot;&gt; &lt;span&gt;fi fj&lt;/span&gt; &lt;i&gt;fi fj&lt;/i&gt; &lt;/p&gt; &lt;hr /&gt; &lt;p&gt;It’s worth noting that ligature support is not necessary for every font. Some are designed in a way that simply prevents characters from colliding. In the example above, the need for ligatures is questionable. But the variant with ligatures enabled definitely looks more appealing.&lt;/p&gt; &lt;p&gt;As with kerning, this will only work if your font is a quality one and have the ligatures worked out.&lt;/p&gt; &lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt; &lt;p&gt;We’ve covered some basics of typography. We’ve learned that typography can help you boost interest in your content and (hopefully) bring some new audience. We’ve also learned how bad typography can yield the opposite outcome. I hope that this little introduction made you &lt;em&gt;aware&lt;/em&gt; of the fact that while web is substantially different from print, we still should care about readability and aesthetics of written language. Bad typography cannot be saved by nice color selection, photos and icons.&lt;/p&gt; &lt;p&gt;If you liked the article, stay tuned for the &lt;a href=&quot;/blog/2018/11/12/building-a-simple-company-website-the-hard-way-vertical-rythm/&quot;&gt;next part&lt;/a&gt; of our &lt;em&gt;Building a simple company website the Hard Way&lt;/em&gt; series where we’re gonna talk about another important aspect of typography: &lt;em&gt;vertical rhythm&lt;/em&gt;.&lt;/p&gt;</content><author><name>Filip Vařecha</name></author><category term="typography"/><category term="sass"/><category term="css"/><category term="fonts"/><summary type="html">Let’s face it: web is bloated with bad typography. Words like vertical rhythm, careful font selection and readability didn’t really make it to the web, it seems. Good news is, that it can be achieved and in this post, I will show you how to approach it.</summary></entry><entry xml:lang="sk"><title type="html">Špehujeme používateľov na našich stránkach</title><link href="https://fragaria.cz/blog/2018/07/25/spehujeme-pouzivatelov-na-nasich-strankach/" rel="alternate" type="text/html" title="Špehujeme používateľov na našich stránkach"/><published>2018-07-25T11:00:00+00:00</published><updated>2018-07-25T11:00:00+00:00</updated><id>https://fragaria.cz/blog/2018/07/25/spehujeme-pouzivatelov-na-nasich-strankach</id><content type="html" xml:base="https://fragaria.cz/blog/2018/07/25/spehujeme-pouzivatelov-na-nasich-strankach/">&lt;p&gt;Patrím medzi ľudí, ktorí majú radi spätnú väzbu na svoju prácu, no tú je na webe ťažké získať, kedže návštevníci nemajú čas sa k vám vyjadrovať. Jedine ak spravujete štátny portál. Preto sú tak obľúbené rôzne nástroje na sledovanie návštevnikov na stránkach a ich vyhodnotením sa vieme dostať k nepriamej spätnej väzbe. A že ich je.&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;“Use the right tools to spy on people on your website”&lt;/p&gt; &lt;/blockquote&gt; &lt;figure class=&quot;figure content-block__cover--mobile figure--wide&quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__1_ahtmgu.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__1_ahtmgu.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__1_ahtmgu.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__1_ahtmgu.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__1_ahtmgu.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__1_ahtmgu.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__1_ahtmgu.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;figcaption class=&quot;figure__caption&quot;&gt;&lt;a href=&quot;https://unsplash.com/@ratushny?utm_medium=referral&amp;amp;utm_campaign=photographer-credit&amp;amp;utm_content=creditBadge&quot;&gt;Dmitry Ratushny&lt;/a&gt;&lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;Dnes vám preto predstavím pár nástrojov, ktoré používam ja pri sledovaní používateľov na stránkach a zaspomínam v čom mi už za tie roky pomohli. Tému ako aj nástroje by som zahrnul do oblasti User Monitoring či User Profiling.&lt;/p&gt; &lt;p&gt;Zameriam sa na vlastné projekty - menšie appky a prezetačné stránky. E-shopom a iným CMS systémov sa nevenujem (našťastie). Navyše tu sa už očakáva nasadenie marketingových služieb, kam zachádzať nechcem. Na druhej strane väčšie či korporátne appky si často vyžadujú mať časť trackovania in-house (interné logovanie, audit, support centrum).&lt;/p&gt; &lt;h2 id=&quot;eu-cookie-law&quot;&gt;EU Cookie law&lt;/h2&gt; &lt;p&gt;Než začneme, trošku politiky. Väčšina nástrojov využíva na sledovanie cookies a o tom potrebujeme ľudí na stránke informovať. Cookies slúžia na rôzne účely - funkcionálne, výkonnové, štatistické či marketingové. Niektoré sú potrebné pre správny beh stránky, iné plnia dodatočnú úlohu na zlepšenie používateľského zážitku, čo je náš prípad. Možností je veľa (ako pri všetkom), no ja používam overenú &lt;a href=&quot;https://cookieconsent.insites.com/&quot;&gt;cookieconsent službu&lt;/a&gt;. Fajn je, že je veľmi dobre customizovateľná a pripravená na použitie s GDPR. Podporuje viacero možností získania súhlasu.&lt;/p&gt; &lt;p&gt;Príklad informačného použitia&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Cookie Consent Screen --&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;stylesheet&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/css&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;load&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Customize cookie consent&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cookieconsent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;initialise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;palette&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;popup&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;background&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;#252e39&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;button&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;background&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;#14a7d0&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;link&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Privacy policy&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;privacy.html&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;elements&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;messagelink&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'&amp;lt;span id=&quot;cookieconsent:desc&quot; class=&quot;cc-message&quot;&amp;gt; &amp;lt;a aria-label=&quot;learn more about cookies&quot; tabindex=&quot;0&quot; class=&quot;cc-link&quot; href=&quot;&quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/span&amp;gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;link&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'&amp;lt;a aria-label=&quot;learn more about cookies&quot; tabindex=&quot;0&quot; class=&quot;cc-link&quot; href=&quot;&quot;&amp;gt;&amp;lt;/a&amp;gt;'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})});&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;h2 id=&quot;gdpr-odbočka-než-začneme&quot;&gt;GDPR odbočka než začneme&lt;/h2&gt; &lt;p&gt;Čo sa týka GDPR samotného, v skratke musíte používateľa informovať o tom aké osobné údaje o ňom zbierate, ako s nimi nakladáte, potrebujete na to explicitné povolenie, ktoré musí mať možnosť odvolať :) V našom prípade sa o zabezpečenie údajov starajú nástroje samotné. Na vás zostáva získanie súhlasu v prípade ak zbierate údaje, ktoré môžu slúžiť na identifikáciu, nestačí len upozornenie. Čo vlastne znamená len krok naviac, kedy vám odklikne &lt;strong&gt;Povoliť&lt;/strong&gt;. Problémom môže byť zmazanie údajov, ak vám niekto tento súhlas neskôr zruší, keďže tento proces je tažšie automatizovateľný.&lt;/p&gt; &lt;p&gt;Pri mnou opisovaných použitiach však takéto údaje nezbieram - tj. údaje sú anonymné (nemajú povahu osobných údajov) a stačí informovanie ako doposiaľ. Samozrejme nástroje si generujú vlasný anonymný identifikátor používateľa. Každopádne je fajn mať pre každý prípad nasadenú &lt;strong&gt;privacy policy&lt;/strong&gt; stránku - &lt;a href=&quot;https://privacypolicies.com/&quot;&gt;dá sa vygenerovať napr. tu&lt;/a&gt;. Pri appkách je samozrejmá aj &lt;strong&gt;terms of service&lt;/strong&gt;.&lt;/p&gt; &lt;h2 id=&quot;nástroje&quot;&gt;Nástroje&lt;/h2&gt; &lt;p&gt;Každý nástroj vzyšiel z určitej potreby dozvedieť sa:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;či je stránka dostupná (Statuscake)&lt;/li&gt; &lt;li&gt;koľko ľudí tam chodí a odkiaľ (Google Analytics, skr. GA)&lt;/li&gt; &lt;li&gt;čo čítajú, ako prechádzajú stránku, v akom momente odídu (Hotjar)&lt;/li&gt; &lt;li&gt;nastali nejaké chyby počas ich návštevy (Loggly)&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Každý nástroj používam vo free variante, ktorá pre vybrané typy projektov postačuje, keď tak firma zaplatí.&lt;/p&gt; &lt;p&gt;Celú konfiguráciu mám schovanú v jednom skripte.&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;devMode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hostname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;localhost&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;GOOGLE_ANALYTICS_KEY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HOTJAR_ID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;LOGGLY_KEY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;devMode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Development mode. Tracking not applied.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* GOOGLE ANALYTICS - user analytics */&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'GoogleAnalyticsObject'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;arguments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;l&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementsByTagName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;insertBefore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'script'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'//www.google-analytics.com/analytics.js'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ga'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ga&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'create'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;GOOGLE_ANALYTICS_KEY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'auto'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ga&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'set'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'anonymizeIp'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// GDPR&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ga&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'send'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'pageview'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* HOTJAR - recordings, heatmaps */&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hj&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hj&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;arguments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;_hjSettings&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hjid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HOTJAR_ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;hjsv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementsByTagName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'head'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'script'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;_hjSettings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hjid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;_hjSettings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hjsv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'//static.hotjar.com/c/hotjar-'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'.js?sv='&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* LOGGLY - error logs */&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;headElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;logglyScriptElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;headElement&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementsByTagName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'head'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;logglyScriptElement&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'script'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;logglyScriptElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;logglyScriptElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;headElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;logglyScriptElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;logglyScriptElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;onload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;_LTracker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;_LTracker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;_LTracker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'logglyKey'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;LOGGLY_KEY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'sendConsoleErrors'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'tag'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'example-logs'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'//cloudfront.loggly.com/js/loggly.tracker-latest.min.js'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;h2 id=&quot;google-analytics-je-základ&quot;&gt;Google Analytics je základ&lt;/h2&gt; &lt;p&gt;Slúži na automatické trackovanie používateľov ako prechádzajú stránky a poskytuje možnosť zaznamenávania udalostí. V podstate poskytuje trackovanie stránok a eventov. Google o vás vie zistiť množstvo vecí, tiez zaujímavejšie pre nás sú napr. vek, lokalita, pohlavie, údaje o zariadení a prehliadači.&lt;/p&gt; &lt;p&gt;Stránky (zmeny v URL) trackuje automaticky, pokiaľ nemáme SPA applikáciu, kde to zostáva na nás - stačí pribaliť wrapper pre danú frontend technológiu, alebo volať priamo. V prípade potreby umožňuje pre dané sledovanie nastaviť dodatočné hodnoty - tzv. dimenzie. Tie použíjeme napr. na internú identifikáciu používateľa - user id, user role atd.&lt;/p&gt; &lt;p&gt;Pekne vysvetlené GDPR pre GA je tu - &lt;a href=&quot;https://www.slideshare.net/mediocz/analytika-vs-gdpr-andre-heller&quot;&gt;Analytika vs. GDPR (André Heller)&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Čo ma najčastejšie zaujímava:&lt;/strong&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;počet návštevníkov a koľko času tam strávia&lt;/li&gt; &lt;li&gt;odkiaľ prišli &lt;ul&gt; &lt;li&gt;direct - dajú sa trackovať parametre url, prípadne ignorovať príchody crawlerov&lt;/li&gt; &lt;li&gt;search - aký názov zadali pri vyhľadávaní?&lt;/li&gt; &lt;li&gt;social - redirect z ktorých sociálnych sietí&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;ako často a kedy tam chodia resp. nechodia &lt;ul&gt; &lt;li&gt;určenie release / patch okien&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;rýchlosť načítania stránky &lt;ul&gt; &lt;li&gt;na čo sa čaká? je to pomalé? treba optimalizovať zdroje?&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;najčastejší hardvér / softvér &lt;ul&gt; &lt;li&gt;poskytuje odpovede na otázky responzivity / potvrdenie mobil first prístupu&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Pekná vec je možnosť tvorby panelov, kde môžete mať naraz až 12 rôzných widgetov (graf, tabuľka, číslo, mapa …). Takéto panely je možné zdielať a použit na viacerých projektoch. Je tu &lt;a href=&quot;https://analytics.google.com/analytics/gallery/&quot;&gt;dostupný marketplace&lt;/a&gt; s množstom používateľských panelov podľa viacerých kritérií. Prípadne ich môžete vykradnúť a vystavať si vlastný.&lt;/p&gt; &lt;p&gt;Super vec je &lt;a href=&quot;https://chrome.google.com/webstore/detail/page-analytics-by-google/fnbdnhhicmebfgdgglcdacdapkcihcoh&quot;&gt;Page analytics chrome extension&lt;/a&gt;, ktorý umožňuje vidieť základné informácie pri príchode na stránku. Navyše umožňuje zobraziť základnú heatmapu s počtom kliknutí na odkazy.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__2_sm5ty3.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__2_sm5ty3.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__2_sm5ty3.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__2_sm5ty3.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__2_sm5ty3.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__2_sm5ty3.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__2_sm5ty3.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;figcaption class=&quot;figure__caption&quot;&gt;Náhľad stránky zo zapnutým Page analytics pluginom I.&lt;/figcaption&gt; &lt;/figure&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__3_agazmm.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__3_agazmm.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__3_agazmm.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__3_agazmm.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__3_agazmm.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__3_agazmm.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__3_agazmm.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;figcaption class=&quot;figure__caption&quot;&gt;Náhľad stránky zo zapnutým Page analytics pluginom II.&lt;/figcaption&gt; &lt;/figure&gt; &lt;p&gt;Pre appky odporúčam mať na projekte pustený na monitore dashboard s real údajmi zo sledovania. Statické stránky podľa potreby prejdem aspoň raz za týždeň.&lt;/p&gt; &lt;h2 id=&quot;hotjar-pre-nahrávanie-obrazovky&quot;&gt;Hotjar pre nahrávanie obrazovky&lt;/h2&gt; &lt;p&gt;Hotjar je môj naobľúbenejší nástroj, ktorý sa zameriava na sledovanie správania používateľa a poskytuje zber spätnej väzby. Predstavte si, že si môžete pustiť video záznam toho čo používateľ robil na vašej stránke. Vidíte ako hýbe myšou / prstom, kam skroluje po stránke, pauzy, ktoré pravedpodobne využíva na čítanie. Skrátka robí veci úplne inak ako ste si predstavovali. Tak túto top feature vám Hotjar ponúka v rámci nahrávania obrazovky na danej stránke. Samozrejmosťou je zopár ďalších štandardných features, ktoré si v skratke prejdeme. Celkovo má veľmi dobrú free ponuku a výrazné výhody oproti alternatívnym riešeniam.&lt;/p&gt; &lt;h3 id=&quot;heatmapy&quot;&gt;Heatmapy&lt;/h3&gt; &lt;p&gt;Štandardná feature, ktorá nesmie chýbať pri takomto nástroji. Podklad pre heatmapu si nástroj spraví sám a ponúka rozdelenie podľa typu zariadenia - mobil / tablet / desktop.&lt;/p&gt; &lt;h3 id=&quot;recordings&quot;&gt;Recordings&lt;/h3&gt; &lt;p&gt;Už spomínané nahrávanie stránky. Je možné nastaviť, či má nahrávať aj text vkladaný do formulárov, pričom ale vždy ignoruje authorizačné inputy pre name a password. Video môžeme triediť, tagovať či pridávať poznámky. To priam nabáda nasadiť na A/B testy, UX testy, či testovanie nových features na vybraných používateľoch.&lt;/p&gt; &lt;p&gt;Čo sa týka GDPR, tak dodatočne pridali možnosť trackovať len whitelistované input fieldy, či úplne ignorovať emailove adresy a numerické inputy.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__4_tl1olb.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__4_tl1olb.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__4_tl1olb.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__4_tl1olb.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__4_tl1olb.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__4_tl1olb.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__4_tl1olb.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;figcaption class=&quot;figure__caption&quot;&gt;Zoznam nahrávok používateľov&lt;/figcaption&gt; &lt;/figure&gt; &lt;h3 id=&quot;ďalšie-vlastnosti&quot;&gt;Ďalšie vlastnosti&lt;/h3&gt; &lt;p&gt;Toto podľa mňa pridali dodatočne aby toho mali viac v ponuke, no je to jednoduché a robí to čo má. Ďalej tu máme:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Analýzu formulárov &lt;ul&gt; &lt;li&gt;v akom momente ľudia opustia formulár&lt;/li&gt; &lt;li&gt;super pre appky s formulármi&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;Analýza konverzie medzi stránkami &lt;ul&gt; &lt;li&gt;analýza prechodu medzi viacstránkovým formulárom, či viacerými stránkami - typicky jednávka&lt;/li&gt; &lt;li&gt;nepoužívam, dá sa riešiť cez Google Analytics&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;Feedback &lt;ul&gt; &lt;li&gt;automatický pridá feedback štítok na stránku&lt;/li&gt; &lt;li&gt;vyber smajlíka podľa nálady + vyber časť stránky + napíš kritiku ak chceš =&amp;gt; pošli&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;Prieskum spokojnosti &lt;ul&gt; &lt;li&gt;možnosť zobraziť pri odchode&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;Anketa &lt;ul&gt; &lt;li&gt;napr. akú ďalšiu feature máme pridať&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;najčastejšie-problémy&quot;&gt;Najčastejšie problémy&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;s navigáciou na stránke &lt;ul&gt; &lt;li&gt;pochopením menu&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;s vypĺňaním formuláru &lt;ul&gt; &lt;li&gt;hlavne selektory (datepicker, multiselect)&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;častokrát sa snažia klikať na zvýraznený text (následok flat designu) &lt;ul&gt; &lt;li&gt;je treba zadefinovať dizajn tlačítok&lt;/li&gt; &lt;li&gt;nezvýrazňovať text zároveň farbou a boldom&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;s vypĺňaním zložitejších formulárov &lt;ul&gt; &lt;li&gt;hlavne selektory (datepicker, multiselect)&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;ľudia uprednostňujú mapu na vyhľadávanie&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;pozorovania-z-personálnej-stránky&quot;&gt;Pozorovania z personálnej stránky&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;veľa ľudí hýbe s myšou ako postupne číta text &lt;ul&gt; &lt;li&gt;vidieť čo si prečítali, čo nie, čo je zle rozdelené&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;recruiteri chcú všetko vidieť hneď, nechce sa im skrolovať ani zbytočne klikať, hľadajú len - základné info (keywords) a idú na kontakt &lt;ul&gt; &lt;li&gt;hneď na začiatku prezentujem aktuálny stav, job description, availability, link na CV a email&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;pred pohovorom viem povedať, či sa na mňa ľudia pripravujú &lt;ul&gt; &lt;li&gt;vačšina si prezrie profil tak hodinku pred stretnutím&lt;/li&gt; &lt;li&gt;hodinku pred termínom prejdem dlhšie nahrávky na webe, väčšinou si čítaju o posledných projektoch - pridajte tam zaujímavosti&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;loggly-pre-odchytávanie-chyb&quot;&gt;Loggly pre odchytávanie chyb&lt;/h2&gt; &lt;p&gt;Toto ma naučili používať chalani v “Spořke”. Dovtedy som logovanie chýb neriešil, alebo som si to posielal na vlastný error endpoint na server. Ak viete používať Kibanu a nechce sa vám riešiť Logstash, tak loggly je riešenie. Ja osobne ho používam len na logovanie chýb. Jinde tam o vás logujú celý príbeh. Takže kto čo potrebuje.&lt;/p&gt; &lt;p&gt;Fajn je, že JS knižnica poskytuje v rámci konfigurácie priamo možnosť odchytávať chyby. Samozrejmosťou je aj možnosť custom logovania - napr. v rámci spracovania http requestov. Čo sa mne páči je možnosť pridávania tagov / custom labelov. To mi umožňuje logovať problémy z viacerých stránok do jedného worskpaceu a v rámci query to jednoducho oddeliť.&lt;/p&gt; &lt;p&gt;V rámci free plánu toho neponúka veľa, určite sa nájdu aj zaujímavejšie riešenia, no jeho ohromnou výhodou je podpora a konfigurovateľnosť. Je možné ho využiť aj na backende a v prípade klienta existuje viacero wrapperov pre každý významnejší framework.&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;PS: nezabudnite vybuildiť source mapu, ináč zo stacketraceu nič zmysluplné nedostanete.&lt;/p&gt; &lt;/blockquote&gt; &lt;h2 id=&quot;statuscake-pre-prípad-výpadku&quot;&gt;StatusCake pre prípad výpadku&lt;/h2&gt; &lt;p&gt;StatusCake je jednoduchý tool, ktorý používam na monitorovanie dostupnosti stránok (page uptime). Aktuálne mám nastavených 6 testov, každý zbehne raz za 30 min. Akonáhle nastane výpadok, obdržím email. Všetko v rámci free plánu.&lt;/p&gt; &lt;p&gt;V rámci testov môžem nastaviť:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;typ testu (http, ssh, ping, dns)&lt;/li&gt; &lt;li&gt;threshold pre upozornenia&lt;/li&gt; &lt;li&gt;test locations&lt;/li&gt; &lt;li&gt;frekvenciu (15-30 min, 1hod, 1den)&lt;/li&gt; &lt;li&gt;pre appky sa hodí - testovanie s basic auth, custom HTTP headers či form data v requeste&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Uptime monitoring je fajn vec, obzvlášť ak máte:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;aplikácie v cloude &lt;ul&gt; &lt;li&gt;spôsob ako im zabrániť v uspávaní&lt;/li&gt; &lt;li&gt;ľahko odhalíte ak ste prečerpali denní limit&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;vám hrozí DDoS útok &lt;ul&gt; &lt;li&gt;ak človek robí politický motivovaný web&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__5_ah69jw.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__5_ah69jw.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__5_ah69jw.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__5_ah69jw.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__5_ah69jw.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__5_ah69jw.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-07-25-spehujeme-pouzivatelov-na-nasich-strankach__5_ah69jw.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;figcaption class=&quot;figure__caption&quot;&gt;Dashboard testu&lt;/figcaption&gt; &lt;/figure&gt;</content><author><name>Lukáš Turský</name></author><category term="google analytics"/><category term="hotjar"/><category term="loggly"/><category term="page uptime"/><category term="user monitoring"/><category term="user recording"/><summary type="html">Patrím medzi ľudí, ktorí majú radi spätnú väzbu na svoju prácu, no tú je na webe ťažké získať, kedže návštevníci nemajú čas sa k vám vyjadrovať. Jedine ak spravujete štátny portál. Preto sú tak obľúbené rôzne nástroje na sledovanie návštevnikov na stránkach a ich vyhodnotením sa vieme dostať k nepriamej spätnej väzbe. A že ich je.</summary></entry><entry xml:lang="cs"><title type="html">Blockchain? Can do!</title><link href="https://fragaria.cz/blog/2018/03/28/blockchain-can-do/" rel="alternate" type="text/html" title="Blockchain? Can do!"/><published>2018-03-28T11:25:00+00:00</published><updated>2018-03-28T11:25:00+00:00</updated><id>https://fragaria.cz/blog/2018/03/28/blockchain-can-do</id><content type="html" xml:base="https://fragaria.cz/blog/2018/03/28/blockchain-can-do/">&lt;p&gt;Blockchain is the new sexy. Everybody is talking about it, people in lines in grocery stores are discussing Bitcoin price, big companies are pouring tons of money in research. Everybody just wants to be a part of it. And from now on, so are we! It turns out, it’s just another young technology that we can handle.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile figure--wide&quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-03-28-blockchain-can-do__1.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-03-28-blockchain-can-do__1.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-03-28-blockchain-can-do__1.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-03-28-blockchain-can-do__1.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-03-28-blockchain-can-do__1.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-03-28-blockchain-can-do__1.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-03-28-blockchain-can-do__1.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;h2 id=&quot;not-that-hard&quot;&gt;Not that hard&lt;/h2&gt; &lt;p&gt;The thing is, that blockchain itself is basically just a distributed ledger that holds an undeniable and unchangeable history of transactions. That sounds pretty boring, but you can actually do many things on top of it. Take for example &lt;a href=&quot;https://www.ethereum.org/&quot;&gt;Ethereum&lt;/a&gt;. Its prominent feature is a thing called &lt;a href=&quot;https://en.wikipedia.org/wiki/Smart_contract&quot;&gt;smart contracts&lt;/a&gt; - an executable Turing-complete code that runs on top of the distributed network. And that’s where the fun begins.&lt;/p&gt; &lt;p&gt;By using a programming language called &lt;a href=&quot;https://solidity.readthedocs.io/en/v0.4.21/&quot;&gt;Solidity&lt;/a&gt;, you can create your own &lt;a href=&quot;https://eidoo.io/erc20-tokens-list/&quot;&gt;crypto-tokens&lt;/a&gt;, &lt;a href=&quot;https://cryptozombies.io/&quot;&gt;fully distributed games&lt;/a&gt; and virtually anything you can imagine. Everything running solely in a distributed network, you don’t have to own any servers. Sounds good? Well, slow down, because there is a lot, and I mean a &lt;strong&gt;LOT&lt;/strong&gt;, of issues.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://ethereum.stackexchange.com/questions/58/why-is-the-average-block-time-17-seconds&quot;&gt;It is awfully slow.&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://ethereum.stackexchange.com/questions/28666/whats-the-transaction-throughput-on-ethereum-how-fast-the-nodes-can-replicate&quot;&gt;It has a very limited throughput.&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://ethereum.stackexchange.com/questions/872/what-is-the-cost-to-store-1kb-10kb-100kb-worth-of-data-into-the-ethereum-block&quot;&gt;Storage of any data is very expensive.&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://www.coindesk.com/startup-lost-160-million-still-wants-shake-ethereum/&quot;&gt;A small mistake and your money is gone.&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://ethereum.stackexchange.com/questions/6107/what-is-the-default-ordering-of-transactions-during-mining-in-e-g-geth&quot;&gt;You have no guarantee that your code will be executed unless you actually pay more.&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://www.mycryptopedia.com/orphan-uncle-genesis-blocks-explained/&quot;&gt;You might think your code was executed, but it was actually not.&lt;/a&gt;&lt;/li&gt; &lt;li&gt;Finding out what went wrong is not exactly straightforward.&lt;/li&gt; &lt;li&gt;The tooling sucks. Big time.&lt;/li&gt; &lt;li&gt;The &lt;a href=&quot;http://swarm-guide.readthedocs.io/en/latest/introduction.html&quot;&gt;supporting&lt;/a&gt; &lt;a href=&quot;https://github.com/ethereum/wiki/wiki/Whisper&quot;&gt;technologies&lt;/a&gt; are just not there. Yet.&lt;/li&gt; &lt;li&gt;Changing your code once it is deployed, is impossible. You need to think ahead.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;So is it a time to walk away? Definitely not. Every single problem can be dealt with and many of them are being dealt with as we speak. And yes, some of them might take a lot of time to get solved, but in the meantime, we can use what we have or figure out some workaround with other tools and services.&lt;/p&gt; &lt;h2 id=&quot;endgame-web-3-and-dapps&quot;&gt;Endgame? Web 3 and Dapps&lt;/h2&gt; &lt;p&gt;The grand vision that motivates people to solve all of the undeniable problems the concept has, is called Web 3, for some reason. A fully distributed and open network of nodes serving everything necessary for a distributed application (called Dapp for short). Be it an application code itself or its data. Pretty ambitious, right?&lt;/p&gt; &lt;p&gt;And the solution is based on - wait for it - Javascript. What? How? A picture is worth a thousand words, they say:&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-03-28-blockchain-can-do__2.png&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-03-28-blockchain-can-do__2.png 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-03-28-blockchain-can-do__2.png 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-03-28-blockchain-can-do__2.png 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-03-28-blockchain-can-do__2.png 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-03-28-blockchain-can-do__2.png 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-03-28-blockchain-can-do__2.png 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;p&gt;During smart contract compilation and deployment to the blockchain, an ABI (Application Binary Interface) is produced. And that is nothing else than a JSON object with method signatures. You can use these signatures to produce bytecode that can be executed over the &lt;a href=&quot;https://en.wikipedia.org/wiki/JSON-RPC&quot;&gt;JSON-RPC&lt;/a&gt; protocol directly on any of the network’s nodes.&lt;/p&gt; &lt;p&gt;That’s why &lt;a href=&quot;https://github.com/ethereum/web3.js/&quot;&gt;web3.js&lt;/a&gt; (and others such as &lt;a href=&quot;https://github.com/ethers-io/ethers.js/&quot;&gt;ethers.js&lt;/a&gt;) was born. It is a library that contains everything you need to interact with an Ethereum node from the world of Javascript. And since you can build client-facing applications with Javascript (using Angular, React, vue.js or anything else you know), you can build the whole Dapp with Javascript.&lt;/p&gt; &lt;p&gt;So the idea is to serve application code from a distributed environment like &lt;a href=&quot;https://ipfs.io/&quot;&gt;IPFS&lt;/a&gt; or &lt;a href=&quot;https://ethereum.stackexchange.com/questions/375/what-is-swarm-and-what-is-it-used-for&quot;&gt;Swarm&lt;/a&gt; and use blockchain for all client to client interactions, such as payments or anything else that needs to be tracked. Of course, you are not limited to Javascript, you can use whatever speaks JSON-RPC. But the beauty of this solution is that almost every device has a browser that can interpret Javascript. And therefore, run your Dapp.&lt;/p&gt; &lt;h2 id=&quot;entering-the-real-world&quot;&gt;Entering the real world&lt;/h2&gt; &lt;p&gt;Apparently, in spite of every problem the technology stack currently has, it attracts many investors and even big, traditional companies, such as &lt;a href=&quot;https://www.tnooz.com/article/lufthansa-invests-blockchain-partners-winding-tree/&quot;&gt;Lufthansa&lt;/a&gt;, &lt;a href=&quot;https://www.jpmorgan.com/global/blockchain&quot;&gt;J. P. Morgan&lt;/a&gt; or &lt;a href=&quot;https://cointelegraph.com/news/walmart-to-implement-blockchain-based-delivery-system&quot;&gt;Walmart&lt;/a&gt;. So there might be some future here.&lt;/p&gt; &lt;p&gt;That’s why we started to work with &lt;a href=&quot;https://windingtree.com/&quot;&gt;Winding Tree&lt;/a&gt; on their product that will try to change the traveling industry forever. The core idea is to cut the middleman and thus save money. This platform, powered by Ethereum blockchain, should allow any hotel, airline or car rental company, to simply list their inventory and accept bookings directly. And it should even simplify the growth of the middlemen themselves by providing a well-structured data of every member of the platform.&lt;/p&gt; &lt;h2 id=&quot;this-cannot-work&quot;&gt;This cannot work&lt;/h2&gt; &lt;p&gt;Well, we think it can and will. The idea might seem farfetched and there are a lot of issues along the way, such as the very small throughput of any blockchain. But there are very smart people already working on these problems and in the near future, we might actually book hotels and flights over a decentralized and open network.&lt;/p&gt; &lt;p&gt;Do you like this idea, do you have any questions? Come join us on &lt;a href=&quot;https://github.com/windingtree&quot;&gt;GitHub&lt;/a&gt;, &lt;a href=&quot;https://t.me/windingtree&quot;&gt;Telegram&lt;/a&gt; or &lt;a href=&quot;https://windingtree.rocket.chat/home&quot;&gt;Rocket Chat&lt;/a&gt;.&lt;/p&gt;</content><author><name>Jirka Chadima</name></author><category term="windingtree"/><category term="crypto"/><category term="blockchain"/><category term="ethereum"/><category term="líf"/><category term="solidity"/><summary type="html">Blockchain is the new sexy. Everybody is talking about it, people in lines in grocery stores are discussing Bitcoin price, big companies are pouring tons of money in research. Everybody just wants to be a part of it. And from now on, so are we! It turns out, it’s just another young technology that we can handle.</summary></entry><entry xml:lang="cs"><title type="html">Ideální bezdrátová sluchátka - špunty</title><link href="https://fragaria.cz/blog/2018/02/14/idealni-bezdratova-sluchatka-spunty/" rel="alternate" type="text/html" title="Ideální bezdrátová sluchátka - špunty"/><published>2018-02-14T08:05:00+00:00</published><updated>2018-02-14T08:05:00+00:00</updated><id>https://fragaria.cz/blog/2018/02/14/idealni-bezdratova-sluchatka-spunty</id><content type="html" xml:base="https://fragaria.cz/blog/2018/02/14/idealni-bezdratova-sluchatka-spunty/">&lt;p&gt;V &lt;a href=&quot;http://blog.fragaria.cz/2018/01/vybirame-bezdratova-sluchatka-uvod.html&quot;&gt;minulém článku&lt;/a&gt; jsme si prosvištěli teorii bezdrátového přenosu zvuku, takže teď už se můžeme pustit do recenzí konkrétních sluchátek.&lt;/p&gt; &lt;p&gt;Všechna popisovaná sluchátka jsem vlastnil nebo vlastním, takže zkušenosti jsou založeny na delším používání. Na druhou stranu rozhodně nejsem „absolutní sluchař“, takže ohledně zvukových kvalit mě berte trochu s rezervou.&lt;/p&gt; &lt;p&gt;Naopak na pohodlnost používání jsem pes :)&lt;/p&gt; &lt;h2 id=&quot;meizu-ep51ep52&quot;&gt;Meizu EP51/EP52&lt;/h2&gt; &lt;p&gt;Nejlevnější sluchátka, která za něco stojí se jmenují &lt;a href=&quot;https://www.gearbest.com/sports-fitness-headphones/pp_356162.html&quot;&gt;Meizu EP51&lt;/a&gt; a novější (a dražší) &lt;a href=&quot;https://www.meizu.com/en/accessory/ep52.html&quot;&gt;Meizu EP52&lt;/a&gt;.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__1.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__1.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__1.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__1.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__1.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__1.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__1.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;p&gt;Meizu mají tradičně řešené ovládání, které visí z pravé strany a umožňuje ovládat hlasitost, zastavit/pustit hudbu a přeskakovat na další nebo předchozí skladbu pomocí dvou respektive tří kliknutí.&lt;/p&gt; &lt;p&gt;Hezká vychytávka je, že pecky jsou magnetické, takže po vyndání z uší se dají na krku scvaknout dohromady a neriskujete ztrátu sluchátek. &lt;strong&gt;EP52&lt;/strong&gt; dokonce tohle scvaknutí poznají a automaticky zapauzují hudbu.&lt;/p&gt; &lt;p&gt;Dalším zajímavým prvkem je plastová rozpěrka na každém sluchátku, která se opře o vnitřek ucha a zaručuje, že sluchátko v uchu drží opravdu dobře a nevypadne ani při běhání - asi.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__2.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__2.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__2.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__2.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__2.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__2.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__2.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;h3 id=&quot;zvuk&quot;&gt;Zvuk&lt;/h3&gt; &lt;p&gt;Obě verze podle mě hrají téměř stejně, bohužel EP51 jsem ztratil, takže přímé porovnání neudělám.&lt;/p&gt; &lt;p&gt;Zvuk trochu postrádá detaily. Zvlášť je to patrné u bicích, kde se ztratí živost a bubny zní jako ze samplu. Výšky a středy jsou na tom lépe, ale pořád je poznat, že jde o sluchátka za pár korun. V porovnání s RHA MA 750 se ztrácí umístění nástrojů v prostoru. Já ale oceňuji, že zvuk je vyrovnaný a sluchátka nejsou zbytečně přebasovaná.&lt;/p&gt; &lt;p&gt;V balení nebyl pěnový nástavec Comply, takže jsem ho musel &lt;a href=&quot;https://www.audigo.cz/Prislusenstvi/Pro-sluchatka/Nausniky-a-nastavce/Comply-Tx-400-velikost-M&quot;&gt;koupit zvlášť&lt;/a&gt; - mimochodem doporučuju pro libovolná sluchátka.&lt;/p&gt; &lt;h3 id=&quot;kodeky&quot;&gt;Kodeky&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;SBC: &lt;strong&gt;ANO&lt;/strong&gt;&lt;/li&gt; &lt;li&gt;AAC: &lt;strong&gt;NE&lt;/strong&gt;&lt;/li&gt; &lt;li&gt;aptX: &lt;strong&gt;ANO&lt;/strong&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;výdrž&quot;&gt;Výdrž&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;Meizu EP51 - 6 hodin&lt;/li&gt; &lt;li&gt;Meizu EP52 - 8 hodin&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Nabíjení přes micro USB.&lt;/p&gt; &lt;h3 id=&quot;cena&quot;&gt;Cena&lt;/h3&gt; &lt;p&gt;&lt;a href=&quot;https://www.gearbest.com/sports-fitness-headphones/pp_356162.html&quot;&gt;Meizu EP51&lt;/a&gt; stojí 27 dolarů, tedy asi 585 Kč. &lt;a href=&quot;https://www.gearbest.com/earbud-headphones/pp_719800.html&quot;&gt;Meizu EP52&lt;/a&gt; seženete za 90 dolarů, což jsou skoro 2000 Kč.&lt;/p&gt; &lt;p&gt;Jednoznačně bych doporučoval ušetřit. Zvukově jsou sluchátka srovnatelná, EP51 navíc nemají otravný nákrčník - za cenu o trochu menší výdrže.&lt;/p&gt; &lt;h2 id=&quot;rha-ma-750-wireless&quot;&gt;RHA MA 750 Wireless&lt;/h2&gt; &lt;p&gt;Skotská firma RHA po úspěchu svých sluchátek &lt;strong&gt;MA 750&lt;/strong&gt; zkusila vydat i jejich bezdrátovou verzi.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__3.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__3.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__3.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__3.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__3.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__3.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__3.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;p&gt;Musím říct, že jsem se na ně docela těšil a že jsem byl docela zklamaný. Jednak nemám rád sluchátka s nákrčníkem - no a když ho &lt;strong&gt;MA 750 Wireless&lt;/strong&gt; musí mít, tak nechápu, proč jsou tak dlouhá. Pokud je vyndáte z uší a pověsíte na krk, tak plandají někde okolo pupku. Proč?&lt;/p&gt; &lt;p&gt;Na drouhou stranu mají stejnou vychytávku jako výše popisované &lt;strong&gt;Meizu EP52&lt;/strong&gt; - po scvaknutí pecek k sobě se hudba automaticky zastaví.&lt;/p&gt; &lt;p&gt;Musím pochválit výbavu - dostanete celou řadu náhradních špuntů do uší, takže není problém vybrat správnou velikost pro libovolné ucho.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__4.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__4.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__4.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__4.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__4.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__4.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__4.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;p&gt;Pokud je budete kupovat, určitě si schovejte účtenku - na mých nefunguje tlačítko „snížit hlasitost“ a kolegovi po 14 dnech přestalo hrát pravé sluchátko. Bohužel jsme je oba koupili na letišti, takže máme smůlu.&lt;/p&gt; &lt;h3 id=&quot;ovládání&quot;&gt;Ovládání&lt;/h3&gt; &lt;p&gt;Ovládání je podobné jako u &lt;strong&gt;Meizu EP52&lt;/strong&gt;, kromě zapínacího tlačítka, které je jako jediné umístěno přímo v nákrčníku. Opět se musím ptát - proč?&lt;/p&gt; &lt;p&gt;Sympatický detail je, že po zapnutí se ve sluchátkách ozve přijemný hlas: „Battery level XX percent“. Takže máte aspoň hrubou představu o tom, jak dlouho ještě vydrží hrát.&lt;/p&gt; &lt;h3 id=&quot;zvuk-1&quot;&gt;Zvuk&lt;/h3&gt; &lt;p&gt;Zvukově jsme tady úplně v jiné lize než u Meizu - což se při rozdílu v ceně nedá divit. RHA se chlubí tím, že zvukovod sluchátka je kovový, narozdíl od plastové konkurence.&lt;/p&gt; &lt;p&gt;Nedokážu posoudit, jestli zrovna tohle je důvod, ale zvuk je krásně detailní. Pokud si poslechnete stejnou písničku nejdřív na Meizu EP51/EP52 a pak na RHA 750, budete překvapeni, kolik drobností vám uniklo - činely, různá chřestidla a podobné drobnosti splynou na levnějších sluchátkách do jednotného šumu na pozadí.&lt;/p&gt; &lt;p&gt;I u vypalovaček typu &lt;em&gt;Highway to Hell&lt;/em&gt; nebo &lt;em&gt;Winnebago Warrior&lt;/em&gt; pořád budete stíhat rozlišovat jednotlivé nástroje.&lt;/p&gt; &lt;p&gt;Milovníci přebasovaných sluchátek budou opět zklamáni, ale já vyrovnaný zvuk beru spíš jako plus.&lt;/p&gt; &lt;h3 id=&quot;kodeky-1&quot;&gt;Kodeky&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;SBC: &lt;strong&gt;ANO&lt;/strong&gt;&lt;/li&gt; &lt;li&gt;AAC: &lt;strong&gt;ANO&lt;/strong&gt;&lt;/li&gt; &lt;li&gt;aptX: &lt;strong&gt;ANO&lt;/strong&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;výdrž-1&quot;&gt;Výdrž&lt;/h3&gt; &lt;p&gt;12 hodin, nabíjení přes USB C&lt;/p&gt; &lt;h3 id=&quot;cena-1&quot;&gt;Cena&lt;/h3&gt; &lt;p&gt;&lt;a href=&quot;https://www.alza.cz/rha-ma750-wireless-d5145045.htm&quot;&gt;RHA MA 750 Wireless&lt;/a&gt; stojí skoro 4 000,- Kč.&lt;/p&gt; &lt;p&gt;Pokud chcete ušetřit, pak existuje i &lt;a href=&quot;https://www.alza.cz/rha-ma650-wireless-d5145044.htm&quot;&gt;RHA MA 650 Wireless&lt;/a&gt; za 2 700,- Kč, což je skoro stejná cena jako &lt;a href=&quot;https://www.alza.cz/rha-ma750-d1531779.htm&quot;&gt;drátová verze RHA MA 750i&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Těžko poradit - u recenzí drátových modelů se jednoznačně doporučovalo připlatit si za dražší model, ale tam byl cenový rozdíl jen asi 500,- Kč.&lt;/p&gt; &lt;p&gt;Já osobně bych si počkal na další verzi - zvukově jsou super, ale na používání mě nějak nebaví…&lt;/p&gt; &lt;h2 id=&quot;beoplay-e8&quot;&gt;Beoplay E8&lt;/h2&gt; &lt;p&gt;Ještě víc než na &lt;strong&gt;RHA MA 750 Wireless&lt;/strong&gt; jsem se těšil na &lt;strong&gt;Beoplay E8&lt;/strong&gt;, takže jsem je koupil, aniž bych ověřil, že umí zpracovat &lt;strong&gt;aptX&lt;/strong&gt;. Neumí.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__5.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__5.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__5.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__5.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__5.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__5.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__5.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;p&gt;Naštěstí můj telefon (OnePlus 5) si poradí i s &lt;strong&gt;AAC&lt;/strong&gt;, jinak bych byl dost namíchnutý.&lt;/p&gt; &lt;p&gt;Jinak ale &lt;strong&gt;Beoplay E8&lt;/strong&gt; nabízí samá pozitiva a sociální jistoty. První, co vás překvapí proti fotkám - sluchátka jsou maličká. Fakt. Tak maličká, že když je vyndám z uší, putují okamžitě do krabičky - jinak bych je určitě ztratil.&lt;/p&gt; &lt;p&gt;Druhá věc je, že hodně dobře drží v uších - přestože nemají žádné vychytávky, které by tomu měly napomoci. Asi bych si s nimi netroufl běhat - koneckonců &lt;a href=&quot;https://www.youtube.com/watch?v=d27gTrPPAyk&quot;&gt;gentleman se k běhu nesníží&lt;/a&gt; - ale dopravu tramvají po Praze zvládají dobře.&lt;/p&gt; &lt;p&gt;Když už jsme u těch tramvají. Velice rychle zjistíte, že stoupnout si v tramvaji k trafu je velká blbost. Přeci jen sluchátka nejsou propojená kabelem, takže jsou na rušení trochu náchylnější. Ale většinou se stačí posunout o metr a všechno je zase v pořádku.&lt;/p&gt; &lt;h3 id=&quot;ovládání-1&quot;&gt;Ovládání&lt;/h3&gt; &lt;p&gt;Narozdíl od ostatních sluchátek v článku nemají &lt;strong&gt;Beoplay E8&lt;/strong&gt; samostatné ovládání - kde by taky bylo. Ovládají se pomocí dotykových plošek na obou peckách.&lt;/p&gt; &lt;p&gt;Jeden dotyk na pravém uchu zastaví nebo pustí muziku, jeden na levém zapne hlasitý odposlech (o tom si povíme dále).&lt;/p&gt; &lt;p&gt;Dva dotyky na pravém (nebo levém) sluchátku přeskočí písničku dopředu (nebo dozadu). Tři dotyky na pravém sluchátku zapnou Google Asistenta nebo Siri - podle telefonu.&lt;/p&gt; &lt;p&gt;Hlasitost se ovládá delším držením pravého (zesílit) nebo levého (zeslabit) sluchátka. Párování s novým telefonem se provádí současným stiskem na obou sluchátkách.&lt;/p&gt; &lt;p&gt;Je vidět, že nad ovládáním někdo docela přemýšlel, protože je snadno pochopitelné. Jediný problém s „dvojklikem“. Když ho provedete dostatečně rychle, sluchátka ho vyhodnotí jako jednoklik a místo přeskočení písničky jí zastaví.&lt;/p&gt; &lt;p&gt;Kdo přemýšlel už míň, jsou vývojáři Bluetooth modulu - s žádnými jinými sluchátky jsem neměl takový problém s párováním s telefonem. Vetšinou se to povede tak napotřetí, takže trpělivost!&lt;/p&gt; &lt;h3 id=&quot;zvuk-2&quot;&gt;Zvuk&lt;/h3&gt; &lt;p&gt;Jako byl rozdíl mezi &lt;strong&gt;Meizu EP52&lt;/strong&gt; a &lt;strong&gt;RHA MA 750&lt;/strong&gt;, tak takový rozdíl mezi &lt;strong&gt;RHA MA 750&lt;/strong&gt; a &lt;strong&gt;Beoplay E8&lt;/strong&gt; rozhodně není.&lt;/p&gt; &lt;p&gt;Skoro bych řekl, že oboje sluchátka už jsou u mě na hranici toho, co dokážu poznat - znějí mi téměř stejně. Čistě pocitově, &lt;strong&gt;Beoplay E8&lt;/strong&gt; mají zvuk trošku teplejší, &lt;strong&gt;RHA MA 750&lt;/strong&gt; se mi zdají víc analyticky přesná.&lt;/p&gt; &lt;p&gt;Ale to jsou jen takový rádoby chytrý kecy. Pro mě jsou oboje sluchátka zvukově na podobné úrovni a oboje super!&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Beoplay E8&lt;/strong&gt; jsou jedny z mála sluchátek, ve kterých si můžete hrát se zvukem pomocí obslužné aplikace v telefonu.&lt;/p&gt; &lt;p&gt;Není to klasický ekvalizér, ale něco, kde pomocí kuličky nastavujete vlastnosti zvuku ve čtverci popsaném nadpisy jako &lt;em&gt;warm&lt;/em&gt;, &lt;em&gt;excited&lt;/em&gt;, &lt;em&gt;relaxed&lt;/em&gt; nebo &lt;em&gt;bright&lt;/em&gt;.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__6.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__6.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__6.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__6.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__6.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__6.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-14-idealni-bezdratova-sluchatka-spunty__6.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;ul&gt; &lt;li&gt;tažením směrem k &lt;em&gt;bright&lt;/em&gt; a &lt;em&gt;excited&lt;/em&gt; zvýrazníte výšky, s tím že u &lt;em&gt;excited&lt;/em&gt; zůstanu zvýrazněné i středy&lt;/li&gt; &lt;li&gt;přetažení směrem &lt;em&gt;warm&lt;/em&gt; zvýrazní basy, &lt;em&gt;relaxed&lt;/em&gt; basy i středy&lt;/li&gt; &lt;li&gt;zajímavá legrace je dvěma prsty kuličku „roztáhnout“ - hudba pocitově rozšíří více do stran.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Mimochodem - i když se to v některých recenzích dočtete, tak &lt;em&gt;nemají&lt;/em&gt; aktivní potlačení okolního hluku!&lt;/p&gt; &lt;p&gt;Zajímavou funkcí je aktivní odposlech okolí - pokud si jdete koupit kafe, nemusíte vyndavat sluchátka z ucha. Stačí ťuknout na levé sluchátko, zapnou se mikrofony a do uší vám půjde zesílený zvuk z okolí. Objednáte si a dalším ťuknutím na levé sluchátko zase pustíte hudbu.&lt;/p&gt; &lt;h3 id=&quot;kodeky-2&quot;&gt;Kodeky&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;SBC: &lt;strong&gt;ANO&lt;/strong&gt;&lt;/li&gt; &lt;li&gt;AAC: &lt;strong&gt;ANO&lt;/strong&gt;&lt;/li&gt; &lt;li&gt;aptX: &lt;strong&gt;NE&lt;/strong&gt; (proboha proč?!)&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;výdrž-2&quot;&gt;Výdrž&lt;/h3&gt; &lt;p&gt;3 hodiny, v krabičce se dobijí ještě na 2x3 hodiny. Nabíjení přes micro USB.&lt;/p&gt; &lt;h3 id=&quot;cena-2&quot;&gt;Cena&lt;/h3&gt; &lt;p&gt;Nejlevněji je &lt;a href=&quot;https://beostore.cz/produkty/e8-beoplay-charcoalgray&quot;&gt;seženete v Beostore&lt;/a&gt; za 7 700,- Kč. Alza si &lt;a href=&quot;https://www.alza.cz/beoplay-e8-natural-d5126238.htm&quot;&gt;řekne o 8 000,- Kč&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Jo. Je to raketa. Za sluchátka.&lt;/p&gt; &lt;p&gt;Ale můžu vám slíbit, že pokud si je pořídíte, tak dlouho nebudete chtít jiné. Už proto, že na ně nebudete mít peníze 🤑.&lt;/p&gt;</content><author><name>Lukáš Marek</name></author><category term="rha"/><category term="aac"/><category term="sluchátka"/><category term="bluetooth"/><category term="beoplay"/><category term="aptx"/><category term="meizu"/><category term="iphone"/><category term="android"/><summary type="html">V minulém článku jsme si prosvištěli teorii bezdrátového přenosu zvuku, takže teď už se můžeme pustit do recenzí konkrétních sluchátek.</summary></entry><entry xml:lang="cs"><title type="html">Mapujeme adresy do českých krajů</title><link href="https://fragaria.cz/blog/2018/02/05/mapujeme-adresy-do-ceskych-kraju/" rel="alternate" type="text/html" title="Mapujeme adresy do českých krajů"/><published>2018-02-05T08:56:00+00:00</published><updated>2018-02-05T08:56:00+00:00</updated><id>https://fragaria.cz/blog/2018/02/05/mapujeme-adresy-do-ceskych-kraju</id><content type="html" xml:base="https://fragaria.cz/blog/2018/02/05/mapujeme-adresy-do-ceskych-kraju/">&lt;p&gt;Občas potkáte jako vývojář zábavné a jednoduché zadání, jako třeba “&lt;strong&gt;Vím, že lidé platí v mých prodejnách po celé republice. Chtěl bych vědět, kolik se toho děje v každém kraji.&lt;/strong&gt;” Zkušený borec si řekne, že prostě vezme mapu krajů, na ně napáruje adresy prodejen a hotovo… V tu chvíli ale netuší, že před ním leží křivolaká cesta plná slepých uliček, nezrušených zákonů, neúplných datových zdrojů a zajímavých algoritmů.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-02-05-mapujeme-adresy-do-ceskych-kraju__1.png&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-05-mapujeme-adresy-do-ceskych-kraju__1.png 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-05-mapujeme-adresy-do-ceskych-kraju__1.png 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-05-mapujeme-adresy-do-ceskych-kraju__1.png 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-05-mapujeme-adresy-do-ceskych-kraju__1.png 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-05-mapujeme-adresy-do-ceskych-kraju__1.png 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-02-05-mapujeme-adresy-do-ceskych-kraju__1.png 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;h2 id=&quot;hledáme-data&quot;&gt;Hledáme data&lt;/h2&gt; &lt;p&gt;Na úvod se sluší říct, co všechno o prodejně víme:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Ulice, město, PSČ, stát - to se píše na obálky, to známe&lt;/li&gt; &lt;li&gt;GPS souřadnice - to se píše do mobilů, to známe&lt;/li&gt; &lt;li&gt;RUIAN ID - Cože?&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;a href=&quot;https://vdp.cuzk.cz/&quot;&gt;RUIAN&lt;/a&gt; (Registr územní identifikace, adres a nemovitostí) je státní katalog, který se používá zejména pro katastrální účely a hodí se při práci s mapovými podklady, adresními místy a dalšími prvky, které se týkají fyzického umístění nějakého objektu v krajině. To zní skvěle, tam určitě budou kraje! No, nejsou.&lt;/p&gt; &lt;h2 id=&quot;slepá-ulička&quot;&gt;Slepá ulička?&lt;/h2&gt; &lt;p&gt;PSČ všichni běžně používáme pro adresování dopisů, a asi také každý víme, že specifické PSČ přísluší specifické poště, která obsluhuje nějaké území. To by mohlo pasovat s kraji! No, nepasuje.&lt;/p&gt; &lt;p&gt;Na webu České pošty se k seznamu všech PSČ samozřejmě &lt;a href=&quot;https://www.ceskaposta.cz/ke-stazeni/zakaznicke-vystupy&quot;&gt;dostanete&lt;/a&gt; (&lt;em&gt;Seznam PSČ částí obcí a obcí bez částí&lt;/em&gt;), ale když se do něj podíváte, zjistíte, že nejvyšší celek, který se k PSČ dozvíte, je okres. Moment, my ještě máme okresy? Ano, máme. A stejně tak máme &lt;strong&gt;dvoje&lt;/strong&gt; kraje. Cože? Skutečně, dle zákonných norem u nás stále rozlišujeme kraje &lt;a href=&quot;https://cs.wikipedia.org/wiki/Okresy_v_%C4%8Cesku&quot;&gt;územní a samosprávní&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Nicméně s tím už se dá pracovat, takže si vesele vyrobíte mapování PSČ -&amp;gt; okres -&amp;gt; kraj a myslíte si, že máte hotovo. Chyba lávky! Ukazuje se totiž (a vzhledem k často diskutovanému rušení a slučování vesnických pošt se to dalo čekat), že jedno PSČ může sahat klidně do třech okresů. Těch případů je zhruba 10 %, a to se bohužel zanedbat nedá, potřebujeme pro tyhle případy náhradní řešení.&lt;/p&gt; &lt;h2 id=&quot;hledáme-data-podruhé&quot;&gt;Hledáme data podruhé&lt;/h2&gt; &lt;p&gt;Takže přichází na řadu GPS souřadnice, s nimi to musí být brnkačka. Kraje nejsou nic jiného než polygony, a algoritmů na párování bodu do polygonu existuje &lt;a href=&quot;http://erich.realtimerendering.com/ptinpoly/&quot;&gt;celá řada&lt;/a&gt;. Ale kde vzít ty polygony? Katastrální úřad? Tam už jsme byli a našli RUIAN. Ministerstvo vnitra? Jestli taková data poskytují, tak je mají pečlivě schovaná. Jednotlivé kraje? Spíš ne. Český statistický úřad? Do nich jsem vkládal velkou naději, a taky nic. My si snad budeme muset obkreslit mapu!&lt;/p&gt; &lt;p&gt;Naštěstí po chvíli googlení najdete přesně to, &lt;a href=&quot;https://navigovat.mobilmania.cz/clanky/navod-pro-gsak-jak-rozdelit-ceske-geokese-podle-kraju/sc-265-a-1313623/default.aspx&quot;&gt;co potřebujete&lt;/a&gt;. V 10 let starém článku. Tak si s tím chvíli hrajete, začnete psát testy, a najednou vám zcela náhodně vybraná souřadnice nefunguje. Co to? Hranice krajů se totiž &lt;a href=&quot;https://www.czso.cz/csu/xb/uzemni_zmeny&quot;&gt;můžou&lt;/a&gt; měnit! Třeba když se rozpustí nějaký ten vojenský újezd. Takže data jsou to sice pěkná, ale zastaralá. Co teď? Vážně jdeme obkreslovat mapu?&lt;/p&gt; &lt;h2 id=&quot;open-street-map-zachraňuje&quot;&gt;Open Street Map zachraňuje&lt;/h2&gt; &lt;p&gt;Není třeba, na záchranu přispěchá Open Street Map a jejich &lt;a href=&quot;https://overpass-turbo.eu/&quot;&gt;Overpass&lt;/a&gt;. Se &lt;a href=&quot;https://overpass-turbo.eu/s/vAm&quot;&gt;správně formulovaným dotazem&lt;/a&gt; je získání hranic krajů hračka. Mimochodem povšimněte si, že zdrojem dat je náš národní katastrální úřad a jeho dataset s povědomým jménem RUIAN. No prostě Koucourkov. Odtud už je jen krůček k automatizaci celého našeho datasetu.&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# GPS data passed through https://github.com/tyrasd/osmtogeojson&lt;/span&gt; curl &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt; POST &lt;span class=&quot;s1&quot;&gt;'https://lz4.overpass-api.de/api/interpreter'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt;@overpass-query.txt | osmtogeojson &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; src.geojson &lt;span class=&quot;c&quot;&gt;# utility script from https://github.com/JirkaChadima/cz-region-boundaries/blob/master/scripts/prepare-gps-data.js&lt;/span&gt; node prepare-gps-data.js &lt;span class=&quot;c&quot;&gt;# ZIP codes processing&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;PSCSOURCE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'https://www.ceskaposta.cz/documents/10180/3738087/xls_pcobc.zip/50617e56-6e9a-4335-9608-96fec214e6ef'&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# https://github.com/JirkaChadima/cz-region-boundaries/blob/master/data/zip/county-region.csv, collected from https://cs.wikipedia.org/wiki/Okresy_v_%C4%8Cesku#Okresy_podle_samospr%C3%A1vn%C3%BDch_kraj%C5%AF&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;OKRESFILE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;../data/zip/county-region.csv&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;ZIPFILE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;src.zip&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;FILE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'zv_pcobc'&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;PSCFILE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;../data/zip/zip-county.csv&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;RESULT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;../data/zip/zip-region.csv&quot;&lt;/span&gt; wget &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PSCSOURCE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; src.zip unzip &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ZIPFILE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; libreoffice &lt;span class=&quot;nt&quot;&gt;--headless&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--convert-to&lt;/span&gt; csv &lt;span class=&quot;nt&quot;&gt;--infilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;csv:44,34,76 &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$FILE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.xls&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--outdir&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; /dev/null &lt;span class=&quot;nb&quot;&gt;cut&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt;, &lt;span class=&quot;nt&quot;&gt;-f2&lt;/span&gt;,5 &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$FILE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.csv&quot;&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;tail&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; +2 | &lt;span class=&quot;nb&quot;&gt;sort&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;uniq&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PSCFILE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# This bash magic is basically an Excel contingency table&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;join&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;','&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-1&lt;/span&gt; 2 &lt;span class=&quot;nt&quot;&gt;-2&lt;/span&gt; 1 &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; 1.1,2.2 &amp;lt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sort&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;','&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-k2&lt;/span&gt;,2 &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PSCFILE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &amp;lt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sort&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;','&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-k1&lt;/span&gt;,1 &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$OKRESFILE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;sort&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;uniq&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$RESULT&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ZIPFILE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$FILE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.xls&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$FILE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.csv&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;A jeho hezké vizualizaci přímo na githubu (samozřejmě bez těch PSČ, ale zase si můžete všimnout hraničních kamenů):&lt;/p&gt; &lt;script src=&quot;https://gist.github.com/JirkaChadima/42be088b9f33102d1d33e454011d5883.js&quot;&gt;&lt;/script&gt; &lt;p&gt;V samotné aplikaci už je to pak jen otázka načtení &lt;a href=&quot;https://github.com/JirkaChadima/cz-region-boundaries/blob/master/data/gps/all.txt&quot;&gt;dvou&lt;/a&gt; &lt;a href=&quot;https://github.com/JirkaChadima/cz-region-boundaries/blob/master/data/zip/zip-region.csv&quot;&gt;souborů&lt;/a&gt; a můžeme vesele párovat: Kvůli výkonu to zkusíme samozřejmě nejdřív podle PSČ a když se zrovna trefíme do nejednoznačně určitelného, tak použijeme jeden z algoritmů pro hledání bodu v polygonu.&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// java code&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/** * https://stackoverflow.com/a/38675842 */&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;isInside&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Point&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Polygon&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intersections&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Point&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getPoints&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getPoints&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Point&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getPoints&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prev&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prev&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intersections&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intersections&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;h2 id=&quot;a-přitom-taková-blbost&quot;&gt;A přitom taková blbost&lt;/h2&gt; &lt;p&gt;Ano, snad jen slovy klasika lze uzavřít tuhle odyseu. Na druhou stranu možná jenom neumím hledat ve státních datech a některý z mnoha úřadů má krasný portál s open-geodaty týkajícími se nejen krajů, ale třeba i měst a dalších územních ploch. Jestli o něm víte, napište nám!&lt;/p&gt; &lt;p&gt;Věřím tomu, že se někomu tahle data mohou hodit, takže všechny zdrojáky a data najdete na &lt;a href=&quot;https://github.com/JirkaChadima/cz-region-boundaries&quot;&gt;GitHubu&lt;/a&gt;, nepravidelně je aktualizuju.&lt;/p&gt;</content><author><name>Jirka Chadima</name></author><category term="geodata"/><category term="openstreetmap"/><category term="javascript"/><summary type="html">Občas potkáte jako vývojář zábavné a jednoduché zadání, jako třeba “Vím, že lidé platí v mých prodejnách po celé republice. Chtěl bych vědět, kolik se toho děje v každém kraji.” Zkušený borec si řekne, že prostě vezme mapu krajů, na ně napáruje adresy prodejen a hotovo… V tu chvíli ale netuší, že před ním leží křivolaká cesta plná slepých uliček, nezrušených zákonů, neúplných datových zdrojů a zajímavých algoritmů.</summary></entry><entry xml:lang="cs"><title type="html">Ideální bezdrátová sluchátka - díl 1.</title><link href="https://fragaria.cz/blog/2018/01/23/vybirame-bezdratova-sluchatka-uvod/" rel="alternate" type="text/html" title="Ideální bezdrátová sluchátka - díl 1."/><published>2018-01-23T09:43:00+00:00</published><updated>2018-01-23T09:43:00+00:00</updated><id>https://fragaria.cz/blog/2018/01/23/vybirame-bezdratova-sluchatka-uvod</id><content type="html" xml:base="https://fragaria.cz/blog/2018/01/23/vybirame-bezdratova-sluchatka-uvod/">&lt;p&gt;Jestli jste pod stromečkem našli nový telefon, je dost slušná šance, že mu chybí „díra“ na sluchátka. Můj telefon sice vstup na jack má, ale když jsem se podesáté zamotal do kabelu vedoucímu z kapsy, řekl jsem si, že to zkusím bez drátů a začal hledat ideální bezdrátová sluchátka.&lt;/p&gt; &lt;p&gt;A protože celý proces byl dlouhý a hlavně dost drahý, chci se s Vámi podělit o svá zjištění.&lt;/p&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__1.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__1.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__1.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__1.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__1.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__1.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__1.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;p&gt;Dráty, bezdráty, kde je rozdíl?&lt;/p&gt; &lt;p&gt;Málokdo (dobře, já to třeba dlouho nevěděl) si uvědomuje, že hlavní rozdíl mezi drátovými a bezdrátovými sluchátky je místo „vzniku“ zvuku.&lt;/p&gt; &lt;p&gt;U normálních sluchátek zvuk „vzniká“ v D/A převodníku přímo v telefonu a kabelem je veden do sluchátek. To znamená, že když máte telefon se špatným D/A převodníkem, je skoro jedno, jak drahá drátová sluchátka si koupíte. Zvuk nebude stát za nic.&lt;/p&gt; &lt;p&gt;Existují telefony (například &lt;a href=&quot;https://tech.ihned.cz/c1-66025270-test-lg-v30-zachranuje-povest-korejskeho-vyrobce-ma-chyby-ale-milovniky-hudby-nadchne&quot;&gt;LG V30&lt;/a&gt;), které se kupují jen kvůli kvalitě D/A převodníku.&lt;/p&gt; &lt;p&gt;U bezdrátových sluchátek je situace opačná - z telefonu se posílá vzduchem digitální signál, který je převáděn na analogový až v elektronice sluchátek. To je mimochodem i důvod, proč pro bezdrátová sluchátka není možné v telefonu použít ekvalizér.&lt;/p&gt; &lt;p&gt;Na druhou stranu si díky tomu i s relativně špatným telefonem můžete užít dobrý poslech - pokud investujete do pořádných sluchátek a trefíte správně kodeky.&lt;/p&gt; &lt;h2 id=&quot;nebojte-se-o-kvalitu-zvuku&quot;&gt;(Ne)bojte se o kvalitu zvuku&lt;/h2&gt; &lt;p&gt;Kodek - to je protokol, kterým se z telefonu do sluchátek přenáší digitální informace o zvuku.&lt;/p&gt; &lt;p&gt;A tady je kámen úrazu. Zjistit, jestli se telefon se sluchátky domluvil na nejkvalitnějším možném kodeku je práce buď pro netopýra nebo programátora (který mrkne do logů).&lt;/p&gt; &lt;p&gt;Běžný smrtelník akorát pozná, že nová a drahá sluchátka hrají „tak ňák blbě“.&lt;/p&gt; &lt;h3 id=&quot;sbc&quot;&gt;SBC&lt;/h3&gt; &lt;p&gt;„Tak ňák blbě“ kodek se odborně jmenuje &lt;strong&gt;SBC&lt;/strong&gt; a je to nejstarší Bluetoothový způsob přenosu stereo zvuku. Vznikl v roce 2003 a tenkrát stačilo, že to nějak hraje - kdo by ještě řešil kvalitu zvuku? Jenže ještě teď v roce 2018, existuje spousta telefonů, které nic jiného neumí. A i když umí, tak často „pro jistotu“ stejně použijí &lt;strong&gt;SBC&lt;/strong&gt;.&lt;/p&gt; &lt;h3 id=&quot;aptx-aptx-hd&quot;&gt;aptX, aptX HD&lt;/h3&gt; &lt;p&gt;S rozmachem bezdrátových sluchátek a reproduktorů se ukázala nutnost nahradit &lt;strong&gt;SBC&lt;/strong&gt; kodek něčím kvalitnějším, takže byl vymyšlen kodek &lt;strong&gt;aptX&lt;/strong&gt;, který je o &lt;a href=&quot;https://www.lifewire.com/aptx-bluetooth-codec-4151667&quot;&gt;něco lepší&lt;/a&gt; ve smyslu, že dokáže přenést více dat za stejnou dobu. Má také &lt;a href=&quot;https://www.rtings.com/headphones/learn/sbc-aptx-which-bluetooth-codec-is-the-best&quot;&gt;menší zpoždění&lt;/a&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;jestli se vám při sledování Youtube zpožďuje zvuk za obrazem, posloucháte v &lt;strong&gt;SBC&lt;/strong&gt;.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Existují ještě kvalitnější varianty &lt;strong&gt;aptX HD&lt;/strong&gt;, &lt;strong&gt;aptX Low Latency&lt;/strong&gt;, ale s těmi si nelámejte hlavu. Existuje jen minimum sluchátek a telefonů, které by je podporovaly.&lt;/p&gt; &lt;h3 id=&quot;aac&quot;&gt;AAC&lt;/h3&gt; &lt;p&gt;Soudruzi v Apple, když viděli ten bordel v bezdrátových protokolech, se ho rozhodli vyřešit jednoduše - přidali protokol vlastní - &lt;strong&gt;AAC&lt;/strong&gt;. iPhony (a iPady) tedy na nějaké &lt;strong&gt;aptX&lt;/strong&gt; kašlou a podporují pouze &lt;strong&gt;AAC&lt;/strong&gt;. Naopak MacBooky umí obojí.&lt;/p&gt; &lt;h2 id=&quot;lepší-časy-asi-přijdou&quot;&gt;Lepší časy asi přijdou&lt;/h2&gt; &lt;p&gt;Dobrá zpráva je, že Qualcomm (výrobce procesorů telefonu) zařadil podporu &lt;strong&gt;aptX&lt;/strong&gt; a &lt;strong&gt;AAC&lt;/strong&gt; do všech svých nových čipsetů (tuším od Snapdragonu 820).&lt;/p&gt; &lt;p&gt;Horší zpráva je, že výrobci samotných telefonů podporu mohou softwarově vypnout a často to také dělají.&lt;/p&gt; &lt;p&gt;No a ke všemu ještě výrobci sluchátek podporů kodeků buď tají nebo k ní přistupují úplně nelogicky. Například &lt;strong&gt;Beoplay&lt;/strong&gt; u modelu &lt;strong&gt;H8&lt;/strong&gt; &lt;strong&gt;aptX&lt;/strong&gt; podporuje, u novějšího modelu &lt;strong&gt;E8&lt;/strong&gt; už ne.&lt;/p&gt; &lt;h2 id=&quot;stabilita-spojení&quot;&gt;Stabilita spojení&lt;/h2&gt; &lt;p&gt;Častým argumentem proti bezdrátovým sluchátkům jsou výpadky spojení. Je pravda, že to je trochu magie - pokud posloucháte v práci a telefon je položený na stole, tak je to většinou bez problémů.&lt;/p&gt; &lt;p&gt;Při chůzi je to horší - většina sluchátek má Bluetooth přijímač umístěný na pravé straně, takže základ je mít telefon v pravé kapse. Stejně se ale stane, že se ohlédnete doprava, přijímač se dostane nad rameno (pokud je přímo ve sluchátku) a spojení na vteřinku vypadne.&lt;/p&gt; &lt;p&gt;Nezáleží na ceně sluchátek, dělají mi to všechny. Vzhledem k tomu, že se mi to stane maximálně jednou za hodinu, neberu to jako velký problém.&lt;/p&gt; &lt;h2 id=&quot;co-si-mám-sakra-koupit&quot;&gt;Co si mám sakra koupit?&lt;/h2&gt; &lt;p&gt;Celé to složité povídání se dá zjednodušit do následujícího doporučení: Pokud máte &lt;strong&gt;iPhone&lt;/strong&gt;, hledejte sluchátka s podporou kodeku &lt;strong&gt;AAC&lt;/strong&gt;, s &lt;strong&gt;Androidem&lt;/strong&gt; se rozhlížejte po modelech s &lt;strong&gt;aptX&lt;/strong&gt;. A doufejte.&lt;/p&gt; &lt;h2 id=&quot;nezapomeňte-na-nastavení-kvality&quot;&gt;Nezapomeňte na nastavení kvality&lt;/h2&gt; &lt;p&gt;Mimochodem, drahá (drátová i bezdrátová) sluchátka vám pravděpodobně hrají “tak ňák blbě”, protože máte ve Spotify (nebo Google Music) nastavenou mizernou kvalitu zvuku. Takže šup do nastavení a opravit. Nemáte zač.&lt;/p&gt; &lt;h4 id=&quot;spotify&quot;&gt;Spotify&lt;/h4&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__2.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__2.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__2.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__2.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__2.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__2.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__2.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;h4 id=&quot;google-play-music&quot;&gt;Google Play Music&lt;/h4&gt; &lt;figure class=&quot;figure content-block__cover--mobile &quot;&gt; &lt;img src=&quot;https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__3.jpg&quot; srcset=&quot;https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__3.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__3.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__3.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__3.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__3.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-01-23-vybirame-bezdratova-sluchatka-uvod__3.jpg 2240w,&quot; class=&quot;figure__image js-fix-baseline&quot; /&gt; &lt;/figure&gt; &lt;p&gt;Příští týden se podíváme na bezdrátová sluchátka do uší (pecky).&lt;/p&gt; &lt;p&gt;&lt;em&gt;Redakční poznámka: Tento blog stál Krtka opravdu dost peněz, tak doufáme v rekordní čtenost.&lt;/em&gt;&lt;/p&gt;</content><author><name>Lukáš Marek</name></author><category term="aac"/><category term="sluchátka"/><category term="bluetooth"/><category term="aptx"/><category term="iphone"/><category term="android"/><summary type="html">Jestli jste pod stromečkem našli nový telefon, je dost slušná šance, že mu chybí „díra“ na sluchátka. Můj telefon sice vstup na jack má, ale když jsem se podesáté zamotal do kabelu vedoucímu z kapsy, řekl jsem si, že to zkusím bez drátů a začal hledat ideální bezdrátová sluchátka.</summary></entry></feed>